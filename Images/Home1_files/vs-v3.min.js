!function(t){"use strict";var e={key_base:"com.digitaltrends.www.vs",key_re:/^[a-z0-9_-]+$/i},r=!1;!function(){var t=/[\?&]vsdebug=([0-1])/,e=t.exec(window.location.search);e&&(r=!!parseInt(e[1]))}();var n=-1;!function(){if(r){var t=/[\?&]vsvariant=([0-9]{1,2})/,e=t.exec(window.location.search);if(e){var i=parseInt(e[1]);"number"==typeof i&&(n=i)}}}();var i=function(t,e){if(r)if(e=e||"log",["warning","error"].indexOf(e)>-1&&(t=e.toUpperCase()+": "+t),["string","number"].indexOf(typeof t)>-1){var n={log:"background: #efe7f6; color: #444444",error:"background: #6f3e79; color: #fff",warning:"background: #efe7f6; color: #c35e1b"};console.log("%c Vs: "+t,n[e])}else console.log(t)},o=function(t){return t?["string","number"].indexOf(typeof t)<0?(i("_sanitize_key: bad type ("+typeof t+")","error"),""):(t=t.toString(),t.match(e.key_re)?t:(i("_sanitize_key: regex failed ("+t+")","error"),"")):""},s=function(){var t={},e={},r={};this.push=function(t){"function"==typeof t&&t()},this.create=function(e,r){if(e=o(e),!e)return{};var n=new a(e,r);return i("App.create: Test created ("+e+")"),t[e]=n},this.test=function(e){return e=o(e),e?t[e]||{}:{}},this.register_events=function(t,r){t=o(t),r=o(r),t&&r&&(e[r]||(e[r]=[]),e[r].indexOf(t)<0&&(e[r].push(t),i("App.register_events: "+r+" event key added to "+t+"'s events map")))},this.log=function(n){if(n=o(n),!n)return!1;if(r[n])return!1;r[n]=!0,setTimeout(function(){r[n]=!1},1e3);for(var s in e)if(e.hasOwnProperty(s)&&s===n){for(var a=0,c=e[s].length;c>a;a++){var f=e[s][a];t[f]&&t[f].log("custom",n)}return!0}return i("App.log: Key not registered for any tests ("+n+")"),!1}},a=function(s,a){var c=this;a=a||{};var f={use_touchend:!1},l={};for(var u in f)f.hasOwnProperty(u)&&(l[u]=a.hasOwnProperty(u)?a[u]:f[u]);var v=s,g=!1,h=-1,y={click:[],custom:[]},d=null,w=null,p=[];this.events=function(t){if("object"!=typeof t||!t.length)return this;for(var e=0,r=t.length;r>e;e++)if(!("object"!=typeof t[e]||t[e].length<2)){var n=t[e][0],i=t[e][1];if(i=o(i),y[n]&&i){var s={key:i,tally:0};"click"===n&&(s.selector=t[e].length>=3&&"string"==typeof t[e][2]&&t[e][2]?t[e][2]:""),y[n].push(s)}}return this},this.every=function(t){return"function"==typeof t&&(d=t),this},this.none=function(t){return"function"==typeof t&&(w=t),this},this.variant=function(t,e,r){return(t=o(t))?("function"!=typeof e&&(e=null),r=parseInt(r),r=r||0,p.push({key:t,callback:e,weight:r}),this):this},this.log=function(t,n){if(!t||["view","custom","click"].indexOf<0)return!1;var s=e.key_base+"."+v+"."+p[h].key+"."+t;return n=o(n),n&&(s+="."+n),DTEvent.getEventPromise("vs:ready").then(function(){r?i("Test.log: "+s):statsc.increment(s)}),!0},this.start=function(){if(g)return i("Test.start: Already started test ("+v+")","warning"),this;i("Test.start: Starting test ("+v+")"),g=!0;for(var e=0,r=0,o=0,s=0,a=p.length;a>s;s++)p[s].weight||o++,e+=p[s].weight;if(r=e,o)for(var s=0,a=p.length;a>s;s++)!p[s].weight&&100>e&&(r+=p[s].weight=Math.round((100-e)/o));i("Test.start: Total weight is "+r+" ("+v+")"),r>100&&i("Total weight is over 100, are you cool with this?","warning");var f=!1;if(window.localStorage){var u=window.localStorage.getItem("vs_tests");u=u?JSON.parse(u):{},u[v]&&"number"==typeof u[v].variant&&(h=u[v].variant,f=!0,i("Test.start: Stored variant is @ index "+h+" ("+v+")"))}if(!f){var k=Math.floor(Math.random()*Math.max(r,100)+1);i("Test.start: rn is "+k+" ("+v+")");for(var _=0,s=0,a=p.length;a>s;s++)if(i("Test.start: "+p[s].key+" variant's weight is "+p[s].weight+" ("+v+")"),_+=p[s].weight,_>=k){h=s;break}if(window.localStorage){var u=window.localStorage.getItem("vs_tests");u=u?JSON.parse(u):{},u[v]||(u[v]={}),u[v].variant=h,window.localStorage.setItem("vs_tests",JSON.stringify(u))}}if(n>=0&&(h=n,i("Test.start: Forced variant is @ index "+h+" ("+v+")")),0>h)return i("Test.start: Not participating, good bye ("+v+")"),w&&w(),this;i("Test.start: Active variant is "+p[h].key+" @ index "+h+" ("+v+")"),d&&d(),p[h].callback&&p[h].callback();for(var s=0,a=y.click.length;a>s;s++)y.click[s].selector&&!function(e){var r=l.use_touchend?"touchend click":"click";t("body").on(r,y.click[e].selector,function(){i("Test.start: "+y.click[e].key+" click event triggered ("+v+")"),y.click[e].tally++||c.log("click",y.click[e].key)})}(s);for(var s=0,a=y.custom.length;a>s;s++)_vs_.register_events(v,y.custom[s].key);return this.log("view"),this}},c=[];window._vs_&&"object"==typeof _vs_&&_vs_.length&&(c=_vs_),window._vs_=new s;for(var f=0,l=c.length;l>f;f++)_vs_.push(c[f])}(jQuery);