/*
 Nielsen SDK package v6.0.0.131 
 (c) 2017 The Nielsen Company 
*/
/*CryptoJS v3.1.2 License Info code.google.com / p / crypto - js - (c) 2009-2013 by Jeff Mott. All rights reserved. code.google.com / p / crypto - js / wiki / License Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/ or other materials provided with the distribution.3.Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
!function(e){function t(e){n&&console&&console.log&&console.log(e)}var a=!0,n=!1;try{t("BSDK check: Checking for ES5 array functions that BSDK uses");var r=new Array("test1","test2","test3");r.forEach(function(e){}),r.indexOf("test"),t("BSDK check: Array functionality passed"),t("BSDK check: Checking for ES5 JSON functions that BSDK uses");var i={fname:"Bob",lname:"Lee",address:{street:"123 test",city:"NY",state:"NY"}},o=JSON.stringify(i);i=JSON.parse(o),t("BSDK check: JSON object functionality passed"),t("BSDK check: Checking for image tag functionality");(new Image).src="",t("BSDK check: Image tag functionality passed"),t("BSDK check: Checking for window.addEventListener functionality"),e.addEventListener||(a=!1),t("BSDK check: window.addEventListener functionality passed"),t("BSDK check: Checking for postMessage functionality"),e.postMessage||(a=!1),t("BSDK check: postMessage functionality passed"),t("BSDK check: Checking for date functionality"),t("DATE "+Date.now()),t("BSDK check: date functionality passed");var s=/(ANTGalio\/3.3)|(ANTGalio\/3.4)/i;t("BSDK check: Checking device useragent"),e.navigator.userAgent.match(s)&&(a=!1,t("BSDK check: Unsupported useragent"))}catch(e){t("ERROR: "+e.message),a=!1}t("****** RESULTS: JS support check "+(a?"PASSED":"FAILED")+" ******");try{a?(!function(e,t){function a(e){return void 0!==s&&void 0!==d&&void 0!==l?s+"//cdn-gl"+d:"https://secure-gl.imrworldwide.com/"}function n(e){e&&e.hasOwnProperty("target")&&(O="true"===String(e.target).toLowerCase())}function r(){S=Date.now(),T=Math.ceil((S-P)/1e3)}function i(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in _)!function(t){var a=_[t];if(void 0!==a&&a.hasOwnProperty("staticPage")&&a.staticPage.hasOwnProperty("evtParams")){"static"===a.staticPage.evtParams.param1.type&&a.ggPM("48",e.target,"","","")}}(t)}function o(o,f){function g(e){U.staticPage.hasOwnProperty("evtParams")&&U.ggPM("56",U.staticPage.evtParams.param1,U.staticPage.evtParams.param2,U.staticPage.evtParams.param3,U.staticPage.evtParams.param4)}function _(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(A[e.type]instanceof Array)for(var a=A[e.type],n=0,r=a.length;n<r;n++)a[n].call(U,t)}function y(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function y(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function h(t){try{var a="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var n=y({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var r in t.fData)if(t.fData.hasOwnProperty(r)){var i=t.fData[r][Object.keys(t.fData[r]).splice(-1,1)];if(void 0!==i)for(var o in i){var s=String(o);-1!==s.indexOf("nol_")&&-1===n.indexOf(s)||(t[r][o]=i[o])}}return t}return t&&t.hasOwnProperty("err")?(t.err=a+": Missing passedFdata, Ad, content or static properties",t):{err:a}}catch(e){}}function P(t){t&&(t.registerListener("ggPM",U),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",U.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",U.removeAsset),t._listeners.addListener("tick",function(){r(),G=!1,_("globalTick",{time:S,seconds:T})}),t._listeners.addListener("dcrHeartbeat",i),t._listeners.addListener("flushQueue",U.emptyQueue),t._listeners.addListener("handleSessionReset",U.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",U.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",n)),e.GLCFG=t)}function b(e,t){D&&D.ggParams&&D.ggParams.nol_sdkDebug&&D.ggParams.nol_sdkDebug.toLowerCase().indexOf("debug","info","warn","true")>-1&&console&&console.log&&console.log("Nielsen Log: "+e,t||"")}function C(e){if(void 0!==e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry")){({requestUrl:function(){var t=this;try{return++e.currRetry>e.maxRetry?t.logErr("maxRetry reached"):t.sendUrlRequest(e.url)}catch(e){t.logErr("Error in fireToUrl requestUrl: "+e)}},sendUrlRequest:function(a){var n=this;try{if(void 0===a)return;var r=new Image;r.onerror=function(a){t.setTimeout(function(){n.requestUrl()},e.retryDelay)},r.onload=function(e){},r.src=a+"&retry="+e.currRetry}catch(e){n.logErr("Error in fireToUrl sendUrlRequest: "+e)}},logErr:function(e){e&&t.console&&t.console.log&&console.log("Error: ",e)}}).requestUrl()}}function E(t){!G&&("blur"===t.type||"blur"!==t.type&&e.GLCFG.browser.hidden())&&(U.ggPM("flush",""),G=!0,b("Data flushed on "+t.type+" event"))}var I,D,A={},M=[],R={},B=String(Date.now())+Math.round(1e4*Math.random()),V,F=5,N=-1,x,G=!1,U=f||{};if(U.id=B,U.name=o,U.initialized=!1,U.staticPage={},U.modules={allModInit:!1},U.configLoaded=!1,U.apid="",U.sdkv=u,U.sdkvForConfig=w,U.useCachedConfig=void 0!==f&&null!==f,U.sessionId="",U.sivt=null,f)if(f.q){for(var j=null,z=0;z<f.q.length;z++)(j=f.q[z])&&j.length>0&&M.push({eventType:j[0],param1:j.length>1?j[1]:void 0,param2:j.length>2?j[2]:void 0,param3:j.length>3?j[3]:void 0,param4:j.length>4?j[4]:void 0});delete f.q}else f.getEventQue&&(M=f.getEventQue());var K={_queueEventLog:!1,_eventLog:[],init:function(){try{var t=e.controllers.util.queryParam("nol_eventHookDelay");if(K._queueEventLog=!1,t){var a=parseInt(t);"NaN"!==a.toString()&&(K._queueEventLog=!0,setTimeout(function(){K._queueEventLog=!1},1e3*(a<=20?a:20)))}}catch(e){K._queueEventLog=!1}},trigger:function(t,a){try{if(a){var n=JSON.parse(JSON.stringify(a));n.name=t.name,n.sdkv=w,K._queueEventLog?K._eventLog.push(n):(K._eventLog&&K._eventLog.length>0&&(e.controllers.util.fireCustomEvent("NSDK_EventHook",K._eventLog),K._eventLog=[]),e.controllers.util.fireCustomEvent("NSDK_EventHook",[n]))}}catch(e){}}},q=function(e,a){return function(n,r){try{a.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function(t){try{t.detail.instanceName===e&&n(t.detail.instance)}catch(e){r&&r(e.message)}}})}catch(e){r&&r(e.message)}}}(U.name,e);return U.getOptOutStatus=function(){return O},U.getId=function(){return B},U.GetName=function(){return U.name},U.Initialized=function(e){if(void 0===e)return U.initialized;U.initialized=e},U.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(R).length:0},U.removeAsset=function(e){void 0!==e&&e.target.param1.hasOwnProperty("assetid")&&(U.staticPage={})},U.handleUpdateOfStatic=function(t){if(t&&t.target){var a=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&void 0!==a&&a.param1.hasOwnProperty("assetid")&&U.getId()===t.target.plid){var n=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(U.staticPage).length&&U.staticPage.hasOwnProperty("id")&&U.staticPage.id===a.param1.assetid&&U.staticPage.hasOwnProperty("lastTimeStamp")?U.staticPage.lastTimeStamp=n:U.staticPage={id:a.param1.assetid,evtParams:a,startTimeStamp:n,lastTimeStamp:n}}}},U.addListener=function(e,t){t&&(void 0===A[e]&&(A[e]=[]),A[e].push(t))},U.removeListener=function(e,t){if(U._listeners[e]instanceof Array)for(var a=A[e],n=0,r=a.length;n<r;n++)if(a[n]===t){a.splice(n,1);break}},U.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&B===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===h(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var a=e.target.passedFdata._currVidType,n=Object.keys(t.content).length>0,r=Object.keys(t.ad).length>0;(n||r)&&(U.ggPM("57","1","sessionReset","",""),n&&!R.hasOwnProperty("content")&&(R.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}))}}U._listeners&&U._listeners.fireEvent&&U._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},U.flushPauseEventQueue=function(){if(!(Object.keys(R).length<=0)){if(U.modules.PLDPR){var e;for(e in R)_("ggPM",{evtInfo:{eventType:R[e].evt,param1:R[e].meta},id:B});R={}}U._listeners&&U._listeners.fireEvent&&U._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},U.cloneObj=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},U.ggPM=function(e,t,a,n,r){if(U.initialized&&void 0!==e&&null!==e&&""!==e){var i={};i.eventType=e,i.param1=U.cloneObj(t),i.param2=U.cloneObj(a),i.param3=U.cloneObj(n),i.param4=U.cloneObj(r),!U.modules.allModInit||2!=U.modules.PLCMB&&2!=U.modules.PLDPR?M.push(i):(U.emptyQueue(),_("ggPM",{evtInfo:i,id:B}),K.trigger(U,i))}},U.getConfigParams=function(){return D},U.emptyQueue=function(){if(!(M.length<=0)&&U.modules.allModInit&&(U.modules.PLCMB||U.modules.PLDPR)){for(var e=0,t=M.length;e<t;e+=1)_("ggPM",{evtInfo:M[e],id:B}),K.trigger(U,M[e]);M=[]}},U.getContainer=function(){return V},U.getClientConfig=function(){return e.configs?e.configs[U.apid]:null},U.ggInitialize=function(t,n,r,i,o,f){if(U.initialized)return k.Promise(function(e,t){e(U)});K.init();var g,_,y,h="us",S="cdn-gl";if(V=f,D={ggParams:t,uid:r,oldFlashDetect:i,detectBrowser:o,nol_playerId:B},typeof t==typeof String()){for(g=e.loadXmlString("<vi>"+t+"</vi>"),_=g.firstChild.firstChild,y=0,t={};_&&void 0!==_&&y<20;)null!==_.firstChild&&(t[_.nodeName]=_.firstChild.nodeValue),_=_.nextSibling,y++;D.ggParams=t}D.ggParams.nol_sdkDebug=e.controllers.util.queryParam("nol_sdkDebug")||D.ggParams.nol_sdkDebug,U.Initialized(!0),u=(t.nsdkv?t.nsdkv.toString():"")||u,p=(t.nsdkvOverride?t.nsdkvOverride.toString():"")||p,h=t.sfcode||h,v=s+(t.coreaddress?l+h:"//secure-"+h)+d,m=t.coreaddress?s+"//"+t.coreaddress+"/":a(t),w=t.sdkconfigver||w,U.apid=D.ggParams.apid,U.sdkv=u,U.sdkvForConfig=U.useCachedConfig&&U.sdkv&&3===U.sdkv.length?"bj."+U.sdkv[0]+"."+U.sdkv[1]+"."+U.sdkv[2]:w;var T=U.getClientConfig();return U.sessionId=e.GLCFG&&e.GLCFG.generateGUID?e.GLCFG.generateGUID():U.id,C({url:v+L+(T&&T.nol_GLOBALS&&T.nol_GLOBALS.nol_dfltAppid?T.nol_GLOBALS.nol_dfltAppid:D.ggParams.apid)+"&sessionId="+U.sessionId+"&C16=sdkv,"+U.sdkvForConfig,currRetry:-1,maxRetry:5,retryDelay:1e3}),U.useCachedConfig&&e.getLib("GLCFG")?(P(e.getLib("GLCFG")),e.GLCFG.loadChildren(U.sdkv),e.GLCFG&&e.GLCFG.browser.ready(function(){e.GLCFG.waitForLS(function(){var t=e.GLCFG.PLDPR.initFromConfig(T,U.id,!0);e.PLSIVT&&(U.sivt=new e.PLSIVT(U,t))})})):e.loadLib("GLCFG",m+"novms/js/2/configs/"+c,e,P),k.Promise(q)},U.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function(e){U&&U.staticPage&&g(U.staticPage)}}),e.GLCFG.browser.addEventListener({element:t,eventType:"blur",useCapture:!1,func:E}),e.GLCFG.browser.addEventListener({element:t,eventType:e.GLCFG.browser.visibilityEvent,useCapture:!1,func:E}),e.GLCFG.browser.addEventListener({element:t,eventType:"pagehide",useCapture:!1,func:E}),U}if(!e.isBuilt||!e.isBuilt()){var s=-1!==t.location.protocol.indexOf("https")?"https:":"http:",l="//secure-",d=".imrworldwide.com/",c="glcfg510.js",u="600",p="600",m=a(),v=s+"//secure-us.imrworldwide.com/",f="imrworldwide.com",g=864e5,_=e.getInstances?e.getInstances():{},y=1,h=5,P=0,S=0,T=0,b=!1,O=!1,L="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",w="bj.6.0.0",C="6.0.0.9";Date.now=Date.now||function(){return+new Date};var k={Promise:function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}return new function(e){var t=function(e){n&&n(e)},a=function(e){r&&r(e)},n=null,r=null;return{then:function(i,o){n=i,r=o,e(t,a)}}}(e)}};if(e.sdkvForConfig=function(){return w},e.isBuilt=function(){return b},e.getInstance=function(a,n){var r=void 0!==a&&("string"==typeof a||"object"==typeof a&&a.constructor===String)?a:"default";return _.hasOwnProperty(r)||(_[r]=n?o(r,e[r]||t[r]):o(r)),_[r]},e.setTotalNumAssetsAllowed=function(e){y=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return m},e.getConfigAddress=function(){return v},e.getInstances=function(){return _},e.loadXmlString=function(e){var t=null;try{return t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e),t}catch(n){try{var a=new DOMParser;return t=a.parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if(void 0!==e){var a=e.indexOf("?"),n=e.indexOf("imrworldwide.com");n>-1&&n<a&&(t=!0)}return t},e.getVersion=function(){return u},e.getVersionOverride=function(){return p},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){void 0!==e&&null!==e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},e.controllers={util:function(e){return function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}if("function"==typeof t.CustomEvent)return!1;e.prototype=t.Event.prototype,t.CustomEvent=e}(),{fireCustomEvent:{fireCustomEvent:function(a,n,r){try{r=r||t,a&&r&&r.dispatchEvent(new CustomEvent(a,{detail:n}))}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}}}.fireCustomEvent,queryParam:{queryParam:function(a){try{a=a.toString().toLowerCase();var n=t.location.search.substr(1).split("&"),r="";if(n.find)r=n.find(function(e){return 0===e.toLowerCase().indexOf(a+"=")});else for(var i=0,o=n.length;i<o;i++)if(0===n[i].toLowerCase().indexOf(a+"=")){r=n[i];break}if(r){var s=r.split("=");if(s&&s.length>1)return s[1]}}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""}}.queryParam,Promise:k.Promise}}(e)},function(){var t={};e.loadLib=function(a,n,r,i){if(void 0!==a&&null!==a&&"string"==typeof a&&void 0!==n&&null!==n&&"string"==typeof n)if(t[a]){if(t[a].body)return void i(t[a].body(r));t[a].callbacks.push({func:i,arg:r})}else t[a]={callbacks:[]},t[a].callbacks.push({func:i,arg:r});else void 0!==n&&null!==n||e.initLib(a,r)},e.registerLib=function(a,n){try{if(t){t.hasOwnProperty(a)||e.initLib(a,e,n);var r=t[a];r.body=n;for(var i=r.callbacks.shift();i;)i.func(r.body(i.arg)),i=r.callbacks.shift()}}catch(e){}},e.initLib=function(e,a,n){if(t[e]||(t[e]={handle:null,callbacks:[]}),t[e].body=n,t[e].body){var r=t[e].body(a);return a[e]=r,void(t[e].handle=r)}},e.getLib=function(e){return t[e]?t[e].handle:null}}(),t.gg_nol_FlashCallBack){for(var E=0,I,D=t.gg_nol_FlashCallBack.length;E<D;E+=1)t.gg_nol_FlashCallBack[E].hasOwnProperty("callBack")&&(I=document.getElementById(t.gg_nol_FlashCallBack[E].swfId))&&I[t.gg_nol_FlashCallBack[E].callBack]();t.gg_nol_FlashCallBack=void 0}b||(b=!0,P=S=Date.now(),e.BUILDVERSION="6.0.0.9")}}(e.NOLBUNDLE=e.NOLBUNDLE||{},e),e.NOLBUNDLE.registerLib("GLCFG",function(t){function a(t,a){if(t&&a){var n=a.path;e.NOLBUNDLE.loadLib(t,n,f,function(){a.status=1})}}function n(e){return C[e]||C[w]||{}}function r(e){try{if(!e.modules.allModInit){var t=!0,a=n(e.sdkv);for(_ in k)if(k.hasOwnProperty(_)&&a.hasOwnProperty(_)&&!f[_]){if("PLLOG"!==_&&2!==e.modules[_]){t=!1;break}}else;t&&(e.modules.allModInit=!0,f._listeners.fireEvent("flushQueue"))}}catch(e){}}function i(e){if(e){var t,a;for(t in f.availModules)f.availModules.hasOwnProperty(t)&&1==e.init&&(e.modules[t]||(e[t]=new f.availModules[t].init(e),e.modules[t]=1));var n=e.getConfigParams().nol_playerId;f._players[n]=e,f._listeners.addListener("tick",function(){r(f._players[n])})}}function o(){void 0!==e.document.referrer&&e.document.referrer.length>0&&f.postMsgAvail&&e.parent.postMessage("nolInit",0===e.location.protocol.indexOf("http")?e.document.referrer:"*"),P<S?e.clearInterval(h):S+=1}function s(){if(!(this instanceof s))return new s;f._listeners={},this.addListener=function(e,t,a){var n=a||!1;void 0===f._listeners[e]&&(f._listeners[e]=[]),f._listeners[e].push({cb:t,remove:n})},this.fireEvent=function(e,t){if(e){var a,n,r;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(f._listeners[e.type]instanceof Array){for(a=f._listeners[e.type],n=0,r=a.length;n<r;n++)a[n]&&a[n].cb.call(this,e);for(n=0;n<a.length;n++)a[n]&&a[n].remove&&(a.splice(n,1),n--)}}},this.removeListener=function(e,t){var a,n,r;if(f._listeners[e]instanceof Array)for(a=f._listeners[e],n=0,r=a.length;n<r;n++)if(a[n]&&a[n].cb===t){a[n].remove=!0;break}}}function l(e){var t,r=n(e||w);for(t in k)k.hasOwnProperty(t)&&r.hasOwnProperty(t)&&!f[t]&&a(t,k[t])}function d(e){e&&f._listeners.fireEvent(e.eventTrigger,e)}function c(){for(var e=0;e<f.onLSReady.length;e++)f.onLSReady[e]();f.onLSReady=[]}function u(t,a,n){try{a=a||1,f.gIframe||(f.gIframe=e.document.createElement("iframe"),f.gIframe.src=L+"novms/html/ls.html",f.gIframe.height=0,f.gIframe.width=0,f.gIframe.style.display="none",f.gIframe.id="lsframe",f.gIframe.onload=function(){p(),f.getEmmUrl(),v(),f.gIframeReady=!0,f.thirdPartyData.cookiesEnabled=navigator.cookieEnabled,n&&n(),f.browser.localStorageSupported()||(f.thirdPartyData.localStorageEnabled=!1,c())}),e&&e.document&&e.document.body?e.document.body.appendChild(f.gIframe):a<=15&&setTimeout(function(){f._listeners.fireEvent("debug",{type:"debug",msg:"document.body not ready - delaying to add ls.html"}),u(t,a++,n)},a<=1?0:300)}catch(t){e.console&&e.console.error&&e.console.error("Unable to register ls.html - "+t.message)}}function p(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(I):void f.lsController.store.set(I,e)}function m(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(emmUrlKey):void f.lsController.store.set(emmUrlKey,e)}function v(){f.gIframe.contentWindow.postMessage(JSON.stringify({key:optoutCookieKey,eventType:"get",storageType:"cookie"}),f.gIframe.src)}var f=t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{},g,_,y,h=0,P=30,S=0,T=!0,b=864e5,O=e.NOLBUNDLE,L=O.getAddress(),w=O.getVersion();f.localStorageId=f.localStorageId||"-1",f.EMMURL=f.EMMURL||"",f.optoutCookie=f.optoutCookie||"",f.gotLSID=f.gotLSID||!1,f.gotEMMURL=f.gotEMMURL||!1,f.gotOptoutCookie=f.gotOptoutCookie||!1;var C={600:{PLVBL:600,PLSIVT:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0",LSID:!0},"600_rc":{PLVBL:600,PLSIVT:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0.rc",LSID:!0},601:{PLVBL:600,PLSIVT:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!0},501:{PLVBL:600,PLSIVT:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!1,FORCEFOCUS:!0}},k={PLDPR:{path:L+"novms/js/2/pldpr"+C[w].PLDPR+".js",status:0},PLDCR:{path:L+"novms/js/2/pldcr"+C[w].PLDCR+".js",status:0},PLVBL:{path:L+"novms/js/2/plvbl"+C[w].PLVBL+".js",status:0},PLSIVT:{path:L+"novms/js/2/plsivt"+C[w].PLSIVT+".js",status:0},PLCMB:{path:L+"novms/js/2/plcmb"+C[w].PLCMB+".js",status:0},PLLOG:{path:L+"novms/js/2/pllog"+C[w].PLLOG+".js",status:0}},E="6.0.0.12",I="nol_lsid";if(emmUrlKey="nol_emmURL",optoutCookieKey="OPT_OUT",f.gIframe=f.gIframe||f.getLS?f.getLS():null,f.gIframeReady=f.gIframeReady||!1,f.onLSReady=f.onLSReady||[],f.thirdPartyData=f.thirdPartyData||{cookiesEnabled:!0,localStorageEnabled:!0},f.postMsgAvail=f.postMsgAvail||"function"==typeof e.postMessage,f.availModules=f.availModules||{},f._players=f._players||{},f.id=f.id||"0",f.childGlobal=f.childGlobal||!!e&&e.top!==e.self,f.parentFound=f.parentFound||!1,f.CryptoJS=f.CryptoJS||function(e,t){var a={},n=a.lib={},r=function(){},i=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function(e,a){e=this.words=e||[],this.sigBytes=a!=t?a:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(a[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<a.length)for(r=0;r<e;r+=4)t[n+r>>>2]=a[r>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a=[],n=0;n<t;n+=4)a.push(4294967296*e.random()|0);return new o.init(a,t)}}),s=a.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;a.push((r>>>4).toString(16)),a.push((15&r).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(a,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++)a.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(a,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,n=a.words,r=a.sigBytes,i=this.blockSize,s=r/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,r=e.min(4*t,r),t){for(var l=0;l<t;l+=i)this._doProcessBlock(n,l);l=n.splice(0,t),a.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new p.HMAC.init(e,a).finalize(t)}}});var p=a.algo={};return a}(Math),f.checkUserAgent=function(t){var a=e?e.navigator.userAgent.toLowerCase():null;return void 0!==t&&t.length>0&&(a=-1!==a.search(t)),a},f.userAgent=function(e){var t=null,a="";try{t=e&&e.navigator?e.navigator.userAgent:null,a=t?t.toLowerCase():""}catch(e){}return{get:function(){return t},isFB:function(){return-1!==a.search(/(?=.*\[fb).*/)},isChrome:function(){return-1!==a.search(/(?=.*chrome).*/)||-1!==a.search(/(?=.*crios).*/)},isMac:function(){return-1!==a.search(/(?=.*macintosh).*/)},isIOS:function(){return-1!==a.search(/(?=.*iphone).*/)||-1!==a.search(/(?=.*ipad).*/)},iosVersion:function(){var e=new RegExp(/os\s([0-9_]*?)\s/gi),t=e.exec(a),n=t&&t.length>1?t[1].split("_"):[];return{version:t&&t.length>0?t[1].replace(/_/gi,"."):"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}},isAndroid:function(){return-1!==a.search(/(?=.*android).*/)},androidVersion:function(){var e=new RegExp(/android (.*?);/gi),t=e.exec(a),n=t&&t.length>1?t[1].split("."):[];return{version:t&&t.length>0?t[1]:"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}}}}(e),f.getBaseBuildVer=function(){var e=n(w);if(e.hasOwnProperty("BASEVER"))return e.BASEVER+"."},f.getConfigVer=function(){var e=n(w);if(e.hasOwnProperty("CONFIG"))return e.CONFIG},f.getIfLsidShouldSend=function(){var e=n(w);if(e.hasOwnProperty("LSID"))return e.LSID},f.globalHasFocus=function(){var t=O.getVersionOverride(),a=n(t);if(a&&a.hasOwnProperty("FORCEFOCUS"))return a.FORCEFOCUS;if(e.top!=e.self)return!1;var r=!1;try{r=e.top.document.hasFocus()}catch(e){r=!0}return r},f.bindPlayers=function(e,t){if(t){var a;f.availModules[t]=e;for(a in f._players)f._players.hasOwnProperty(a)&&1==f._players[a].init&&(f._players[a].modules[t]||(f._players[a][t]=new e.init(f._players[a]),f._players[a].modules[t]=2))}},f.enablePlayer=function(e,t){e&&t&&(f._players[e].modules[t]=2)},f.registerListener=function(e,t){t&&(t.addListener(e,function(t){f._listeners.fireEvent(e,t)}),t.init||(t.init=1,i(t)))},f._listeners=f._listeners||new s,f.lsReady=function(){return f.gIframeReady},f.lsController={store:{get:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({key:t,eventType:"get",storageType:"local"}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},set:function(t,a){f.gIframe.contentWindow.postMessage(JSON.stringify({key:t,eventType:"set",storageType:"local",data:a}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}},request:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({eventType:"reqUsingFrame",data:{url:t}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},maskedRequest:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:t}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}},f.configController={_keys:{cmsKey:"nol_clientCMSmap"},getGlobal:function(e,t){return e&&t&&t.nol_GLOBALS?t.nol_GLOBALS[e]||"":""},cmsMap:function(e,t){var a=this.getGlobal(this._keys.cmsKey,t);return a?a[e]:""}},f.scriptController={inject:function(e,t,a,n){if(e){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.async=!0,r.onload=a,r.onerror=n,r.src=e;var i=null,t=t||"";if("script"===t){if((i=document.getElementsByTagName("script"))&&i.length>0)return void(t=i[0].parentNode.insertBefore(r,i[0]))}else if("head"===t){if((i=document.getElementsByTagName("header"))&&i.length>0)return void(t=i[0].appendChild(r))}else if(t&&"string"==typeof t){if((t=document.getElementById(t))&&"function"==typeof t.insertBefore)return void t.parentNode.insertBefore(r,t)}else if(t&&"object"==typeof t&&t.appendChild&&"function"==typeof t.appendChild)return void t.appendChild(r);document.body.appendChild(r)}}},f.getLS=function(){return f.gIframe},f.waitForLS=function(e){f.thirdPartyData.localStorageEnabled?e&&(f.gIframeReady&&"-1"!==f.localStorageId?e():f.onLSReady.push(e)):e&&e()},f.browser=function(){function t(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}function a(e){void 0!=e&&null!=e&&null!=e.element&&void 0!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}function n(n){function r(){a({element:document,eventType:"DOMContentLoaded",func:i}),a({element:e,eventType:"load",func:i})}function i(){r(),o.ready=!0,n&&n()}if(o.ready)return void(n&&n());"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(i):(t({element:document,eventType:"DOMContentLoaded",func:i}),t({element:e,eventType:"load",func:i}))}function r(){try{var t=e.localStorage;if(null!==t&&void 0!==t)return!0}catch(e){return!1}return!1}function i(){return document[l]||"hidden"===document[c]}var o={ready:!1},s=["webkit","moz","ms","o"],l="hidden",d="visibilitychange",c="visibilityState";if(!document[l])for(var u=0;u<s.length;u++)if(s[u]+"Hidden"in document){l=s[u]+"Hidden",d=s[u]+"visibilitychange",c=s[u]+"visibilityState";break}return{addEventListener:t,removeEventListener:a,ready:n,localStorageSupported:r,hidden:i,visibilityEvent:d}}(),f.updateReceiver=function(e){d(e)},f.generateGUID=function(){function e(){var e;do{e=Math.floor(992*Math.random())}while(e>61);return e}for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=29,n="",r=0;r<29;r++)n+=t.charAt(e());return n+=Math.floor((new Date).getTime()/1e3)},f.getLsId=function(){return"string"!=typeof f.localStorageId?f.localStorageId.toString():f.localStorageId},f.getEmmUrl=function(){return m()},f.getOptoutCookie=function(){return f.optoutCookie},f.setLsId=function(e,t,a){if(null!==e&&void 0!==e&&e!==f.getLsId()&&(f.localStorageId=e,p(f.localStorageId)),t&&f.postMsgAvail)if(f.userAgent.isAndroid()&&f.userAgent.androidVersion().major<6){var n="";f.userAgent.isChrome()?(n="intent://nuid/"+a+"/#Intent;action=android.intent.action.VIEW;scheme=nielsenwebid;component=com.nielsen.odm/.NielsenMobileMeter;end",f.lsController.request(n),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM intent "+n})):(n="nielsenwebid://nuid/"+a,f.lsController.request(n),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM deep link "+n})),f.setEmmUrl(n)}else f.lsController.maskedRequest(t),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM link "+t}),f.setEmmUrl(t)},f.setEmmUrl=function(e){e&&(f.EMMURL=e,m(f.EMMURL))},f.isValidJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return"Object"==typeof t},f.loadChildren=l,!f.built){try{u(),O.browserSafeAddEventListener({element:e,eventType:"message",func:function(t){var a,n,r;if(t.data&&"nolInit"==t.data&&e.self===e.top)for(a=e.document.getElementsByTagName("iframe"),n=a.length-1;n>=0;n--)a[n].contentWindow==t.source&&f.postMsgAvail&&t.source.postMessage({key:"nolChildReg",parentID:f.id},0===e.location.protocol.indexOf("http")?t.origin:"*");else t.data&&t.data.key&&"nolChildReg"==t.data.key&&(f.parentFound=!0,e.clearInterval(h));if(t.origin&&t.origin.indexOf("imrworldwide.com")>-1&&t.data){var i=""!==t.data.val&&f.isValidJson(t.data.val)?JSON.parse(t.data.val):t.data.val,o=""!==t.data.key&&f.isValidJson(t.data.key)?JSON.parse(t.data.key):t.data.key;if(t.data&&"lsget"===t.data.type)switch(o){case I:var s="OPTOUT"===String(i).toUpperCase();f.setLsId(i),f.gotLSID=!0,f._listeners.fireEvent("sendOptOutStatus",s);break;case emmUrlKey:f.EMMURL=i,f.gotEMMURL=!0}else if(t.data&&"cookieget"===t.data.type)switch(o){case optoutCookieKey:f.optoutCookie=i,f.gotOptoutCookie=!0}else if(t.data&&"lsdisabled"===t.data.type&&1==t.data.val)switch(f.thirdPartyData.localStorageEnabled=!1,t.data.key){case I:f.gotLSID=!0;break;case emmUrlKey:f.gotEMMURL=!0}else t.data&&"cookiedisabled"===t.data.type&&1==t.data.val&&(f.thirdPartyData.cookiesEnabled=!1,t.data.key===optoutCookieKey&&(f.gotOptoutCookie=!0));f.gotLSID&&f.gotEMMURL&&f.gotOptoutCookie&&c()}},useCapture:!1}),void 0===g&&(g=e.setInterval(function(e){f._listeners.fireEvent("tick",e)},1e3)),f.childGlobal&&(h=e.setInterval(function(){o()},500))}catch(e){}!function(){var e=f.CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<a;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<a;o++)e.push(n.charAt(i>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var a=e.length,n=this._map,r=n.charAt(64);r&&-1!=(r=e.indexOf(r))&&(a=r);for(var r=[],i=0,o=0;o<a;o++)if(o%4){
var s=n.indexOf(e.charAt(o-1))<<o%4*2,l=n.indexOf(e.charAt(o))>>>6-o%4*2;r[i>>>2]|=(s|l)<<24-i%4*8,i++}return t.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,a,n,r,i,o){return((e=e+(t&a|~t&n)+r+o)<<i|e>>>32-i)+t}function a(e,t,a,n,r,i,o){return((e=e+(t&n|a&~n)+r+o)<<i|e>>>32-i)+t}function n(e,t,a,n,r,i,o){return((e=e+(t^a^n)+r+o)<<i|e>>>32-i)+t}function r(e,t,a,n,r,i,o){return((e=e+(a^(t|~n))+r+o)<<i|e>>>32-i)+t}for(var i=f.CryptoJS,o=i.lib,s=o.WordArray,l=o.Hasher,o=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=i+o,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,s=e[i+0],l=e[i+1],c=e[i+2],u=e[i+3],p=e[i+4],m=e[i+5],v=e[i+6],f=e[i+7],g=e[i+8],_=e[i+9],y=e[i+10],h=e[i+11],P=e[i+12],S=e[i+13],T=e[i+14],b=e[i+15],O=o[0],L=o[1],w=o[2],C=o[3],O=t(O,L,w,C,s,7,d[0]),C=t(C,O,L,w,l,12,d[1]),w=t(w,C,O,L,c,17,d[2]),L=t(L,w,C,O,u,22,d[3]),O=t(O,L,w,C,p,7,d[4]),C=t(C,O,L,w,m,12,d[5]),w=t(w,C,O,L,v,17,d[6]),L=t(L,w,C,O,f,22,d[7]),O=t(O,L,w,C,g,7,d[8]),C=t(C,O,L,w,_,12,d[9]),w=t(w,C,O,L,y,17,d[10]),L=t(L,w,C,O,h,22,d[11]),O=t(O,L,w,C,P,7,d[12]),C=t(C,O,L,w,S,12,d[13]),w=t(w,C,O,L,T,17,d[14]),L=t(L,w,C,O,b,22,d[15]),O=a(O,L,w,C,l,5,d[16]),C=a(C,O,L,w,v,9,d[17]),w=a(w,C,O,L,h,14,d[18]),L=a(L,w,C,O,s,20,d[19]),O=a(O,L,w,C,m,5,d[20]),C=a(C,O,L,w,y,9,d[21]),w=a(w,C,O,L,b,14,d[22]),L=a(L,w,C,O,p,20,d[23]),O=a(O,L,w,C,_,5,d[24]),C=a(C,O,L,w,T,9,d[25]),w=a(w,C,O,L,u,14,d[26]),L=a(L,w,C,O,g,20,d[27]),O=a(O,L,w,C,S,5,d[28]),C=a(C,O,L,w,c,9,d[29]),w=a(w,C,O,L,f,14,d[30]),L=a(L,w,C,O,P,20,d[31]),O=n(O,L,w,C,m,4,d[32]),C=n(C,O,L,w,g,11,d[33]),w=n(w,C,O,L,h,16,d[34]),L=n(L,w,C,O,T,23,d[35]),O=n(O,L,w,C,l,4,d[36]),C=n(C,O,L,w,p,11,d[37]),w=n(w,C,O,L,f,16,d[38]),L=n(L,w,C,O,y,23,d[39]),O=n(O,L,w,C,S,4,d[40]),C=n(C,O,L,w,s,11,d[41]),w=n(w,C,O,L,u,16,d[42]),L=n(L,w,C,O,v,23,d[43]),O=n(O,L,w,C,_,4,d[44]),C=n(C,O,L,w,P,11,d[45]),w=n(w,C,O,L,b,16,d[46]),L=n(L,w,C,O,c,23,d[47]),O=r(O,L,w,C,s,6,d[48]),C=r(C,O,L,w,f,10,d[49]),w=r(w,C,O,L,T,15,d[50]),L=r(L,w,C,O,m,21,d[51]),O=r(O,L,w,C,P,6,d[52]),C=r(C,O,L,w,u,10,d[53]),w=r(w,C,O,L,y,15,d[54]),L=r(L,w,C,O,l,21,d[55]),O=r(O,L,w,C,g,6,d[56]),C=r(C,O,L,w,b,10,d[57]),w=r(w,C,O,L,v,15,d[58]),L=r(L,w,C,O,S,21,d[59]),O=r(O,L,w,C,p,6,d[60]),C=r(C,O,L,w,h,10,d[61]),w=r(w,C,O,L,c,15,d[62]),L=r(L,w,C,O,_,21,d[63]);o[0]=o[0]+O|0,o[1]=o[1]+L|0,o[2]=o[2]+w|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,a=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;a[r>>>5]|=128<<24-r%32;var i=e.floor(n/4294967296);for(a[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(a.length+1),this._process(),t=this._hash,a=t.words,n=0;4>n;n++)r=a[n],a[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=l._createHelper(o),i.HmacMD5=l._createHmacHelper(o)}(Math),function(){var e=f.CryptoJS,t=e.lib,a=t.Base,n=t.WordArray,t=e.algo,r=t.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=a.hasher.create(),i=n.create(),o=i.words,s=a.keySize,a=a.iterations;o.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var d=1;d<a;d++)l=r.finalize(l),r.reset();i.concat(l)}return i.sigBytes=4*s,i}});e.EvpKDF=function(e,t,a){return r.create(a).compute(e,t)}}(),f.CryptoJS.lib.Cipher||function(e){var t=f.CryptoJS,a=t.lib,n=a.Base,r=a.WordArray,i=a.BufferedBlockAlgorithm,o=t.enc.Base64,s=t.algo.EvpKDF,l=a.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,a,n){return("string"==typeof a?v:m).encrypt(e,t,a,n)},decrypt:function(t,a,n){return("string"==typeof a?v:m).decrypt(e,t,a,n)}}}});a.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},c=function(t,a,n){var r=this._iv;r?this._iv=e:r=this._prevBlock;for(var i=0;i<n;i++)t[a+i]^=r[i]},u=(a.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize;c.call(this,e,t,n),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize,r=e.slice(t,t+n);a.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=r}}),d=d.CBC=u,u=(t.pad={}).Pkcs7={pad:function(e,t){for(var a=4*t,a=a-e.sigBytes%a,n=a<<24|a<<16|a<<8|a,i=[],o=0;o<a;o+=4)i.push(n);a=r.create(i,a),e.concat(a)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},a.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:u}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=e.createEncryptor;else a=e.createDecryptor,this._minBufferSize=1;this._mode=a.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=a.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){e=o.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var a=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:a})}},m=a.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function(e,t,a,n){n=this.cfg.extend(n);var r=e.createEncryptor(a,n);return t=r.finalize(t),r=r.cfg,p.create({ciphertext:t,key:a,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(a,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,a,n){return n||(n=r.random(8)),e=s.create({keySize:t+a}).compute(e,n),a=r.create(e.words.slice(t),4*a),e.sigBytes=4*t,p.create({key:e,iv:a,salt:n})}},v=a.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:t}),encrypt:function(e,t,a,n){return n=this.cfg.extend(n),a=n.kdf.execute(a,e.keySize,e.ivSize),n.iv=a.iv,e=m.encrypt.call(this,e,t,a.key,n),e.mixIn(a),e},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),a=n.kdf.execute(a,e.keySize,e.ivSize,t.salt),n.iv=a.iv,m.decrypt.call(this,e,t,a.key,n)}})}(),function(){for(var e=f.CryptoJS,t=e.lib.BlockCipher,a=e.algo,n=[],r=[],i=[],o=[],s=[],l=[],d=[],c=[],u=[],p=[],m=[],v=0;256>v;v++)m[v]=128>v?v<<1:v<<1^283;for(var g=0,_=0,v=0;256>v;v++){var y=_^_<<1^_<<2^_<<3^_<<4,y=y>>>8^255&y^99;n[g]=y,r[y]=g;var h=m[g],P=m[h],S=m[P],T=257*m[y]^16843008*y;i[g]=T<<24|T>>>8,o[g]=T<<16|T>>>16,s[g]=T<<8|T>>>24,l[g]=T,T=16843009*S^65537*P^257*h^16843008*g,d[y]=T<<24|T>>>8,c[y]=T<<16|T>>>16,u[y]=T<<8|T>>>24,p[y]=T,g?(g=h^m[m[m[S^h]]],_^=m[m[_]]):g=_=1}var b=[0,1,2,4,8,16,32,64,128,27,54],a=a.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes/4,e=4*((this._nRounds=a+6)+1),r=this._keySchedule=[],i=0;i<e;i++)if(i<a)r[i]=t[i];else{var o=r[i-1];i%a?6<a&&4==i%a&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=o<<8|o>>>24,o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=b[i/a|0]<<24),r[i]=r[i-a]^o}for(t=this._invKeySchedule=[],a=0;a<e;a++)i=e-a,o=a%4?r[i]:r[i-4],t[a]=4>a||4>=i?o:d[n[o>>>24]]^c[n[o>>>16&255]]^u[n[o>>>8&255]]^p[n[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,o,s,l,n)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,d,c,u,p,r),a=e[t+1],e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,n,r,i,o,s){for(var l=this._nRounds,d=e[t]^a[0],c=e[t+1]^a[1],u=e[t+2]^a[2],p=e[t+3]^a[3],m=4,v=1;v<l;v++)var f=n[d>>>24]^r[c>>>16&255]^i[u>>>8&255]^o[255&p]^a[m++],g=n[c>>>24]^r[u>>>16&255]^i[p>>>8&255]^o[255&d]^a[m++],_=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^o[255&c]^a[m++],p=n[p>>>24]^r[d>>>16&255]^i[c>>>8&255]^o[255&u]^a[m++],d=f,c=g,u=_;f=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^a[m++],g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^a[m++],_=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^a[m++],p=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^a[m++],e[t]=f,e[t+1]=g,e[t+2]=_,e[t+3]=p},keySize:8});e.AES=t._createHelper(a)}(),f.built=!0}if(e.gg_nol_CallBack)for(_=0,y=e.gg_nol_CallBack.length;_<y;_+=1)e.gg_nol_CallBack[_]&&e.gg_nol_CallBack[_].callBack&&e.gg_nol_CallBack[_].callBack(f);return f}),e.NOLBUNDLE.registerLib("PLVBL",function(t){if(!t.PLVBL){var a="6.0.0",n={viewRatioKey:"nol_viewability",vizuURLKey:"nol_vizuURL",viewabilityKey:"nol_vsData",screenSizeKey:"nol_scrnSize",videoSizeKey:"nol_vidSize",windowSizeKey:"nol_winSize",nodeKey:"nol_nodeId",auThresholdKey:"nol_auThreshold",volumeKey:"nol_volume",audibilityKey:"nol_auData",id3GapKey:"nol_id3IntrvlGp",tickOffsetKey:"nol_viTickOffset"},r={screenSize:function(){return[e.screen.width,e.screen.height]},nodeSize:function(e,t){return e?"width"===t?e.clientWidth:"height"===t?e.clientHeight:[e.clientWidth,e.clientHeight]:""},browserSize:function(){return[e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight]}},i=function(e){var t={ticker:null,tickInterval:e,queue:[]},a={startTicker:function(e){null===t.ticker&&(t.ticker=setInterval(function(){if(t.queue&&t.queue.length>0){var a=t.queue.splice(0,1);a&&a.length>0&&e&&e(a[0])}},t.tickInterval))},stopTicker:function(){clearInterval(t.ticker),t.ticker=null},addTick:function(e){t.queue.push(e)}};return{start:a.startTicker,stop:a.stopTicker,add:a.addTick}},o=t.GLCFG||t;return t.PLVBL=function(e,a,s){var l={initialized:!1,_defaults:{nol_viewability:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_auThreshold:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_volume:"100"},clientConfig:a.getClientConfig(),globals:a.getConfigParams().ggParams,cmsMap:null,nodeId:"",node:null,viewAPI:null,viewRatios:null,vizuURL:"",viewParams:null,volume:null,auThresholds:[],intervalGap:2,state:"idle",queueTicks:s||!1,ticker:null,tickerInterval:1e3,screenSeries:"",viewSeries:[],elementSeries:"",viewportSeries:"",audibilitySeries:[]},d={log:function(t,a){o._listeners.fireEvent(t,{type:t,msg:e.get("nol_comment")+" - "+a})},incrementSeries:function(e,t){var a=null;e?a=e[e.length-1]:e=[],a&&2===a.length&&a[0]===t?a[1]++:e.push([t,1])},clearSeries:function(){d.log("debug","Clearing viewability"),l.viewSeries=[],l.screenSeries="",l.elementSeries="",l.viewportSeries="",l.audibilitySeries=[],l.viewAPI&&l.viewAPI.resetMeasurement()},setDataSeries:function(e,t){"function"==typeof e.set&&(e.set(n.viewabilityKey,t?"":JSON.stringify(l.viewSeries)),e.set(n.windowSizeKey,t?"":JSON.stringify(l.viewportSeries)),e.set(n.videoSizeKey,t?"":JSON.stringify(l.elementSeries)),e.set(n.screenSizeKey,t?"":l.screenSeries),e.set(n.audibilityKey,t?"":JSON.stringify(l.audibilitySeries)))},getDataSeries:function(){var e={};return e[n.viewabilityKey]=l.viewSeries,e[n.windowSizeKey]=l.viewportSeries,e[n.videoSizeKey]=l.elementSeries,e[n.screenSizeKey]=l.screenSeries,e[n.audibilityKey]=l.audibilitySeries,e},getNodeId:function(){var e=o.configController.cmsMap(n.nodeKey,l.clientConfig);return l.globals?l.globals[e]:""},getVolumeParam:function(){var e=o.configController.cmsMap(n.volumeKey,l.clientConfig);return l.globals?l.globals[e]:""},evalUpperThreshold:function(e,t){if(e&&e>0&&t&&t.length>0)for(var a=0,n=t.length;a<n;a++){if(e<t[a]&&0==a)return 0;if(a==n-1&&e>=t[a])return parseFloat(t[a]);if(e<t[a])return parseFloat(t[a-1])}return 0},evalVolume:function(e){if(void 0!==e&&null!==e&&e.toString().match(/^\d*\.?\d*$/gi)&&"NaN"!==parseFloat(e).toString()&&"NaN"!==parseInt(e).toString()){var t=e;return!t.toString().match(/\d*\.\d+/i)&&parseFloat(t)>1&&(t=parseFloat(t)/100),t=Math.round(100*d.evalUpperThreshold(parseFloat(t),l.auThresholds))}return null},getThreshold:function(e,a){if(e&&a){try{var n=t.configController.getGlobal(e,a.clientConfig),r="string"==typeof n?JSON.parse(n):n,i=!0;if(r&&"object"==typeof r&&r.length>0){for(var o=null,s=0,l=r.length;s<l;s++)if(!r[s].toString().match(/^\d*\.?\d*$/gi)){i=!1;break}if(i)return r}}catch(t){d.log("warn","Viewabilty config theshold for "+e+" is invalid. Default threshold will be used")}var c=a._defaults?a._defaults[e]:[];return"string"==typeof c?JSON.parse(c):c}return[]}},c={init:function(a){try{a&&(d.log("debug","Initializing viewability module"),l.nodeId=a,l.node=document.getElementById(a),l.viewRatios=d.getThreshold(n.viewRatioKey,l),l.vizuURL=o.PLDPR.resolveExpression(o.configController.getGlobal(n.vizuURLKey,l.clientConfig),e),l.auThresholds=d.getThreshold(n.auThresholdKey,l),l._defaults[n.volumeKey]=t.configController.getGlobal(n.volumeKey,l.clientConfig)||l._defaults[n.volumeKey],l.volume=d.evalVolume(d.getVolumeParam())||parseInt(l._defaults[n.volumeKey]),l.intervalGap=e.isProductOf("mtvr")?t.configController.getGlobal(n.id3GapKey,l.clientConfig):t.configController.getGlobal(n.tickOffsetKey,l.clientConfig)||0,l.viewParams={externalTick:1,instantOn:0,node:l.node,width:r.nodeSize(l.node,"width"),height:r.nodeSize(l.node,"height"),ratio:l.viewRatios,tickOffset:l.intervalGap},l.vizuURL&&l.node?(o.scriptController.inject(l.vizuURL,l.nodeId,function(){if("function"==typeof getVIAPI){if(l.viewAPI=getVIAPI(),!l.viewAPI)return void d.log("warn","Viewability API not instantiated by viewability library. Unable to initialize viewability module.");l.viewAPI.initVI(l.viewParams),l.initialized=!0,l.queueTicks&&(l.ticker=new i(l.tickerInterval),l.ticker.start(function(e){c.singleTick(e.ph),c.setData(e.fData)})),d.log("debug","Viewability module successfully initialized")}}),d.log("info","Viewabilty module injected")):d.log("warn","Viewabilty library URL not defined in config. Unable to initialize viewability module."))}catch(e){d.log("warn","Failed to initialize viewability module."),l.initialized=!1}},start:function(e){c.clear(e),"running"!==l.state&&l.initialized&&(l.viewAPI.startVI(),l.state="running")},stop:function(){"stopped"!==l.state&&l.initialized&&(l.viewAPI.stopVI(),l.state="stopped")},singleTick:function(e){l.initialized&&("running"!==l.state&&c.start(),d.log("debug","PLVBL Tick "+e),l.viewAPI&&l.viewAPI.updateTick(e,l.volume),l.screenSeries=r.screenSize().join("x"))},tick:function(e,t){l.queueTicks?l.ticker.add({ph:e,fData:t}):c.singleTick(e)},setData:function(e){l.initialized&&(l.viewSeries=l.viewAPI&&l.viewAPI.getVideoSeries?l.viewAPI.getVideoSeries():[],l.audibilitySeries=l.viewAPI&&l.viewAPI.getAudioSeries?l.viewAPI.getAudioSeries():[],l.viewportSeries=l.viewAPI&&l.viewAPI.getViewportSeries?l.viewAPI.getViewportSeries():[],l.elementSeries=l.viewAPI&&l.viewAPI.getElementSizeSeries?l.viewAPI.getElementSizeSeries():[],l.screenSeries=r.screenSize().join("x"),d.setDataSeries(e))},setVolume:function(e){if(l.initialized&&e){var t=d.evalVolume(e);void 0!==t&&null!==t&&""!==t?(l.volume=t,d.log("debug","Audibiliy volume set to "+t)):d.log("debug",'Volume "'+e+'" is invalid. Volume set will be ignored.')}},clear:function(e){l.initialized&&d.clearSeries(),e&&d.setDataSeries(e,!0)}};return e.get("nol_url").indexOf(n.viewabilityKey)>-1&&(d.log("debug","Viewability module loaded"),c.init(d.getNodeId())),{initialized:function(){return l.initialized},start:c.start,stop:c.stop,tick:c.tick,setData:c.setData,getData:d.getDataSeries,setVolume:c.setVolume,clear:c.clear}},t.PLVBL}}),e.NOLBUNDLE.registerLib("PLSIVT",function(e){if(!e.PLSIVT){var t={vizuURLKey:"nol_sivtURL"},a=e.GLCFG||e;return e.PLSIVT=function(e,n){var r={initialized:!1,sivtURL:"",clientConfig:e.getClientConfig(),globals:e.getConfigParams().ggParams,uaid:e.sessionId,apid:e.apid,dataObj:n};return{init:function(){if(r.sivtURL=a.configController.getGlobal(t.vizuURLKey,r.clientConfig),r.sivtURL){var e=a.PLDPR.resolveExpression(r.sivtURL,r.dataObj);a.scriptController.inject(e,document.body)}else a._listeners.fireEvent("warn",{type:"warn",msg:"SIVT library URL not defined in config. Unable to initialize SIVT module."});r.initialized=!0}}.init(),{initialized:function(){return r.initialized}}},e.PLSIVT}}),e.NOLBUNDLE.registerLib("PLDPR",function(t){"use strict";function a(e,t){var a=[],n=e.split("&"),r,i;for(r=0,i=n.length;r<i;r+=1)0!==n[r].indexOf(t)&&a.push(n[r]);return a.join("&")}function n(t,a){var n=t.split("||"),r=n[0]||t;if(e)for(var i=0,o=n.length;i<o;i+=1)r=n[i],void 0!==e["on"+r]&&(e.addEventListener?e.addEventListener(r,a,!1):e.attachEvent&&e.attachEvent("on"+r,a))}function r(e,t){var a;if("num"==t)a=parseInt(e,10),e=isNaN(a)?0:a;else if("bin"==t)e=isNaN(Number(e))?"0":Number(e).toString(2);else if("bool"==t)switch(e.toString().toLowerCase()){case"false":case"no":case"0":case"":e=!1;break;default:e=!0}else"b2n"==t&&(a=parseInt(e,2),e=isNaN(a)?0:a);return e}function i(e){var t,a=[];for(t=0;t<r(e,"num");t+=1)a.push({tsv:0,save:!1,updated:!1});return a}function o(e){return{tags:[],eventQueue:e&&e.eventQueue?e.eventQueue:[],tagSize:1,bReInit:!1,debug:Le,eventQueueIndex:0}}function s(t){var n;void 0!==t&&0!==t.length&&(n=e.document.createElement("script"),n.type="text/javascript",n.src=a(t,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),n.onerror=function(t){var a=t.target.src;e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target),_e<ye&&(_e+=1,e.setTimeout(function(){s(a)},5e3))},n.onload=function(t){_e=0,e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target)},e.document.head?e.document.head.appendChild(n):e.document.getElementsByTagName("head")[0].appendChild(n))}function l(){var e=Array.prototype.slice.call(arguments);t._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function d(e){return encodeURIComponent(e).replace("'","%27")}function c(e){var t=0===ie.indexOf("https")?"https":"http",a,n,r,i=e.url,o=e.hasOwnProperty("maskRef")?e.maskRef:-1,l=e.method||"GET";if("__sendIt"!==i&&"https"===t&&-1===i.indexOf("https")&&(i=t+i.substr(i.indexOf("://"))),e.prod&&"ocr"===e.prod&&-1!==i.indexOf("&ty=js"))return void s(i);if(Se||"__sendIt"===i)if(i&&Se&&be)Oe.push(i);else if("__sendIt"!==i||be)i&&Se&&!be&&Pe.push(i);else{for(be=!0,a=0,n=Pe.length;a<n;a+=1)Re.setup({pingSendTime:S(e.serverTimeOffset),url:Pe.shift(),maskRefUrl:o,method:l});Pe=Pe.concat(Oe),be=!1,Oe=[]}else Re.setup({pingSendTime:S(e.serverTimeOffset),url:i,maskRefUrl:o,method:l})}function u(e,t){var a="",n,r,i,o;if(!e||!t)return e;for(o=t.length,r=0,i=e.length;r<i;r+=1)n=e.charCodeAt(r)^t.charCodeAt(r%o),a+=0===n?e.charAt(r):String.fromCharCode(n);return a}function p(e,a,n,r,i){var o,s;-1===n.indexOf("[")&&-1===n.indexOf("]")&&(!r.val||r.val.length<=0)?i||(g(e,{type:"100",msg:n+" missing -- "+R({data:e,param:"nol_comment"})}),r.state=!1,r.val=""):"{"===a||"}"===a?r.val=t.CryptoJS.MD5(r.val.toString()).toString():"<"===a||">"===a?(o=n.match(ue["<"].end),o?(s=o[0].match(/[\d]+/g),r.val=String(r.val).substr(s[0],s[1])):r.val=u(String(r.val),R({data:e,param:"nol_xorSeed"}))):"("!==a&&")"!==a||(r.val=d(r.val))}function m(e,t,a,n){var r="";return a&&a.clientField!==t&&!0!==n.end&&(r=Ne.cms.parse(a,e,n))?r:R({data:e,param:t,vidType:n?n.vidType:""})}function v(e,t,a){var n=t.match(/[\[\{<\(]/g),r,i,o,s,l,d,c,u,v,f,_,y,h=R({data:e,param:"nol_xorSeed"})||"",P,S;n=n?n.reverse():[],i=t.match(/[\}\]\>\)]/g)||[],s={start:n.length?t.lastIndexOf(String(n[0])):-1,end:i.length?t.indexOf(String(i[0])):t.length},i&&">"===i[0]&&(s.end=t.search(ue["<"].end)||t.indexOf(">")),d=t.substring(s.start+1,s.end),v=d.split("||");var T=ve.exec(d),b=T&&T.length>1?T[1]:lookup,O=null,L="",w=ke[e.get("nol_playerId")]||{};for(f=0,_=v.length;f<_&&(d=v[f],O=ve.exec(v[f]),L=O&&O.length>2&&O[2]?O[2].replace("_",""):"",!((y=m(e,d,w[b],{vidType:(a?a.vidType:null)||L,silent:!0,noClone:!0,end:!!a&&a.end,noEncode:!0}))&&y.length>0));f+=1);if(y&&y.length>0&&(S="string"==typeof d?d.split("_"):d,P=S[0]?S.splice(0,2).join("_"):S,(l=w[P]?w[P].encoding:"")&&(n=n.reverse().concat(l.match(/[\[\{<\(]/g)).reverse(),i=i.reverse().concat(l.match(/[\}\]>\)]/g)).reverse())),r={val:y,state:R({data:e,param:"nolPriv_sendData"})},c=n?n.length:0,u=i?i.length:0,(o=Math.min(c,u))>0)for(f=0,_=o;f<_;f+=1)p(e,n[0]||i[0],t,r,h),n.shift(),i.shift();else!0!==(!!a&&a.silent)&&(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",g(e,{type:100,msg:d+" missing "+R({data:e,param:"nol_comment"})}));return{val:r.val,strManipulate:n,strManiEnd:i}}function f(e,t,a,n){var r,i,o={val:"",state:R({data:e,param:"nolPriv_sendData"})},s=R({data:e,param:"nol_md5Seed"}),l,d,c,u=[],m,f=[],g=[],_,y="",h,P,S,T,b,O,L=R({data:e,param:"nol_xorSeed"});if(n=n||{},t=t||R({data:e,param:"nol_url"})||"",null!==(i=t.match(pe.regex)))for(P=0,S=i.length;P<S;P+=1){if(r=i[P],l=r.substr(pe.length,r.length-2*pe.length),d=l.split("+"),u=[],y="",c=0,d&&d.length>1){for(T=0,b=d.length;T<b;T+=1)if(y=d[T],n.silent=!0,m=v(e,y,n),m.strManipulate.length>0&&(c=u.length,f=[].concat(m.strManipulate,f)),u[c]=u[c]?u[c]+m.val:m.val,m.strManiEnd.length>0&&m.strManiEnd.length!==f.length){for(g=[].concat(g,m.strManiEnd),o={val:u[c],state:R({data:e,param:"nolPriv_sendData"})},_=0,O=m.strManiEnd.length;_<O;_+=1)p(e,f[0],y,o,L),f.shift(),g.shift();u[c]=o.val}for(o.val=u.join(""),h=f.length>=g.length?f:g,_=0,O=h.length;_<O;_+=1)p(e,h[0],y,o,L),f.shift(),g.shift()}else m=v(e,l,n),o={val:m.val,state:R({data:e,param:"nolPriv_sendData"})};t=t.replace(r,o.val)}return t}function g(e,a,n,r){var i,o,s=R({data:e,param:"nolPriv_errorSent"});return!0!==r&&R({data:e,param:"nolPriv_sendData",val:!1}),!(!n&&-1!==(!a||s.indexOf(a.type.toString())))&&(!!Ne.isInitialized(e)&&(i=a.type+","+d(a.msg),R({data:e,param:"nol_errorMessage",val:i}),t._listeners.fireEvent("error",{type:"error",msg:i}),o=f(e,R({data:e,param:"nol_errorURL"})),c({serverTimeOffset:R({data:e,param:"nolPriv_serverTimeOffset"}),url:o,maskRef:R({data:e,param:"nol_rfrmsk"}),method:Ne.getRequestMethod(e)}),s+=a.type.toString()+",",R({data:e,param:"nolPriv_errorSent",val:s}),!0))}function _(e){var t=!1}function y(e,t,a){a&&!a.serviceSending[t]&&(a.serviceSending[t]=!0,s(e))}function h(e,t){var a=e||6;return Math.ceil(t/a)*a||"0"}function P(e,t){var a=!1,n=0,i=!1,o=r(R({data:e,param:"nol_unQualSegmentValue"}),"num"),s=R({data:e,param:"nol_minutes"}),l=[],d=!!t&&t.save,c,u,p,m=r(R({data:e,param:"nol_segmentTimeSpent"}),"num"),v=r(R({data:e,param:"nol_sendQual"}),"num"),f=R({data:e,param:"nol_cadence"});for(c=0,u=s.length;c<u;c+=1)p=Math.floor(s[c].tsv/R({data:e,param:"nol_creditValue"})),p>=1?(s[c].save&&"daypart"!==R({data:e,param:"nol_cadence"})?l.push(0):(l.push(R({data:e,param:"nol_creditFlag"})),n+=1,a=!0),i=!0):(l.push(0),i=!1),d?s[c].save=i:(s[c].tsv=0,s[c].save=!1,s[c].updated=!1);return R({data:e,param:"nol_duration",val:l.join("")}),v&&(a=n>=v),!0===r(R({data:e,param:"nol_minWonOverride"}),"bool")&&(a=!0),a||"interval"!==f&&"streamduration"!==f||d||("S"===R({data:e,param:"nol_segmentPrefix"})&&o&&R({data:e,param:"nol_duration",val:h(o,m)}),a=m>1),a}function S(e){return void 0!==e?(Be()/1e3>>0)+e:Be()/1e3>>0}function T(t){Number(t)===t&&t%1!=0&&e.console&&e.console.warn&&e.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function b(e,t,a){var n=R({data:e,param:"nol_url"})||"",o,s,d,u,p=0,m,v=R({data:e,param:"nol_playerId"}),g=r(R({data:e,param:"nol_maxPingCount"}),"num"),y=r(R({data:e,param:"nol_pingCount"}),"num"),h=!!t&&t.returnLength,b=R({data:e,param:"nol_cadence"}),O=R({data:e,param:"nol_eventFilter"}),L=r(R({data:e,param:"nol_maxLength"}),"num");if(R({data:e,param:"nol_pingCreationTime",val:S(R({data:e,param:"nolPriv_serverTimeOffset"}))}),s=R({data:e,param:"nol_timeSpentViewing"}).content,d=R({data:e,param:"nol_timeSpentViewing"}).ad,u=R({data:e,param:"nol_timeSpentViewing"}).static,T(R({data:e,param:"nol_segmentTimeSpent"})),(!e.isProductOf(["dcrvideo","vrivideo"])||"1"===R({data:e,param:"nol_forceFireOnClose_content"})||!(e.isProductOf(["dcrvideo","vrivideo"])&&0===s.nol_segmentTimeSpent||"dcrstatic"===R({data:e,param:"nol_product"})&&0===u.nol_segmentTimeSpent)||"interval"!==b&&"streamduration"!==b||0!==d.nol_count||0!==d.nol_segmentTimeSpent)&&"false"===R({data:e,param:"nol_disabled"})&&(0===g||g>y)){if(Fe.setNextTick(e,null,"content"),o=P(e,t)||"stream"===b||"impression"===b||"id3"===R({data:e,param:"nol_product"}),R({data:e,param:"nol_random",val:Math.round(1e9*Math.random())}),n=f(e,n),p=n.length,R({data:e,param:"nolPriv_sendData"})&&o&&!h||L>0&&L<p){if(R({data:e,param:"nol_id3Data"})&&R({data:e,param:"nol_id3Data",val:!1}),l(R({data:e,param:"nol_comment"})," -queued @"+Math.floor(Be()/1e3)+", timeOffset == "+R({data:e,param:"nolPriv_serverTimeOffset"})+", DU == "+R({data:e,param:"nol_segmentTimeSpent"})+" -- ",n),O.onSendPing&&(A(e,O.onSendPing),"true"===R({data:e,param:"nol_disabled"})))return;c({serverTimeOffset:R({data:e,param:"nolPriv_serverTimeOffset"}),url:n,prod:R({data:e,param:"nol_product"}),maskRef:R({data:e,param:"nol_rfrmsk"}),method:Ne.getRequestMethod(e)}),a&&a(e),R({data:e,param:"nol_viewCount_"+e._currVidType.toLowerCase(),val:"0"}),Fe.clear(e),fe&&fe.hasOwnProperty(v)&&fe[v].hasOwnProperty("debug")&&"logging"===fe[v].debug&&(m=R({data:e,param:"nol_debugUrl"}),m||(m=R({data:e,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),m+="pli="+v+"&sendPing="+R({data:e,param:"nol_product"})+"&"+n.substring(n.indexOf("?")+1),_(m)),y+=1,s.nol_segmentTimeSpent=0,s.nol_count=0,d.nol_segmentTimeSpent=0,d.nol_count=0,u.nol_segmentTimeSpent=0,u.nol_count=0,R({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Be()/1e3)}),R({data:e,param:"nolPriv_priority",val:0}),R({data:e,param:"nol_pingCount",val:y.toString()}),R({data:e,param:"nol_forceFireOnClose_content",val:"0"});var w=i(R({data:e,param:"nol_segmentLength"}));R({data:e,param:"nol_duration",val:new Array(w.length+1).join("0")})}else if(h)return{len:p,fData:n};return null}}function O(e){try{if(void 0===e)return;var a=i(R({data:e,param:"nol_segmentLength"}));R({data:e,param:"nol_minutes",val:a}),R({data:e,param:"nol_duration",val:new Array(a.length+1).join("0")})}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function L(e,t){var a=r(R({data:e,param:"nol_segmentLength"}),"num")*r(R({data:e,param:"nol_segmentValue"}),"num");return{segment:Math.floor(t/a+1),minute:Math.floor(t%a/R({data:e,param:"nol_segmentValue"})),seconds:t%R({data:e,param:"nol_segmentValue"})}}function w(e,a,n){var o,s=R({data:a,param:"nol_tagSrc"}),e=""!==e?e:"id3"===s&&R({data:a,param:"nol_fdcid"})!==R({data:a,param:"nol_cidNull"})?R({data:a,param:"nol_fdoffset"}):"id3"===s&&R({data:a,param:"nol_pccid"})!==R({data:a,param:"nol_cidNull"})?R({data:a,param:"nol_pcoffset"}):e,l=R({data:a,param:"nol_eventFilter"}),d=R({data:a,param:"nol_minutes"}),c=r(R({data:a,param:"nol_pingCount"}),"num"),u,p,m,v,f,g,_,y,h=R({data:a,param:"nol_playerId"}),P=t._players&&t._players.hasOwnProperty(h)?t._players[h]:-1,S=R({data:a,param:"nol_localDay"}),T=R({data:a,param:"nol_dayQhr"}),O=R({data:a,param:"nol_weekQhr"}),w,C,k,E=R({data:a,param:"nol_wmDay"}),I=R({data:a,param:"nol_wmDayQhr"}),D,M,B=r(R({data:a,param:"nol_weekEndUTC"}),"num"),V=r(R({data:a,param:"nol_weekStartUTC"}),"num"),F=B-V,N,x=r(R({data:a,param:"nolPriv_serverTimeOffset"}),"num"),G,U=R({data:a,param:"nol_timer"})||"nol_fdoffset",j=r(R({data:a,param:"nolPriv_currMin"}),"num"),z=r(R({data:a,param:"nol_maxPingCount"}),"num"),K=r(R({data:a,param:"nol_creditValue"}),"num"),q=r(e,"num"),J=r(R({data:a,param:"nol_intrvlThrshld"}),"num")||86400,W="nol_cmsoffset"===U||"nol_pageoffset"===U?r(R({data:a,param:"nol_cmsIntrvlGp"}),"num")||2:r(R({data:a,param:"nol_id3IntrvlGp"}),"num"),H=r(R({data:a,param:"nol_segmentLength"}),"num")*r(R({data:a,param:"nol_segmentValue"}),"num"),X=r(R({data:a,param:"nol_currSeg"}),"num"),Y=r(R({data:a,param:"nolPriv_now"}),"num"),$,Z=R({data:a,param:"nol_timeSpentViewing"})[a._currVidType],ee=r(R({data:a,param:"nolPriv_currPos"}),"num");if(a.set("nolPriv_prevPos",a.get("nol_currPos")),1===e?a.set("nol_currPos","0"):a.set("nol_currPos",e),"modcadence"===a.get("nol_cadence"))e%a.get("nol_segmentValue")==0&&(e<a.get("nol_length")||!a.get("nol_length"))&&b(a,null,n&&n.onPingFired?n.onPingFired:null);else{if(D=Math.floor(q/86400)+1,E||R({data:a,param:"nol_wmDay",val:D}),M=Math.floor(q%86400/900)+1,I||R({data:a,param:"nol_wmDayQhr",val:M}),q>86400&&"nol_cmsoffset"===U?(q+=x,y=q+r(R({data:a,param:"nol_startDayTimeOffset"}),"num"),g=y+r(R({data:a,param:"nol_GMTOffset"}),"num")):y=g=q,w=Math.floor(g/86400)+1,S&&S!=w&&b(a,null,n&&n.onPingFired?n.onPingFired:null),S||R({data:a,param:"nol_localDay",val:w}),q>B&&(l.onWeekEndUTC?A(a,l.onWeekEndUTC):(R({data:a,param:"nol_week",val:R({data:a,param:"nol_nextWeek"})}),R({data:a,param:"nol_period",val:R({data:a,param:"nol_nextPeriod"})}),R({data:a,param:"nol_weekStartUTC",val:B+1}),R({data:a,param:"nol_weekEndUTC",val:B+1+F}))),C=Math.floor((q-r(R({data:a,param:"nol_weekStartUTC"}),"num"))/900)+1,O&&C===O||R({data:a,param:"nol_weekQhr",val:C}),"nol_cmsoffset"===U&&(q=g%86400),k=Math.floor(q/900)+1,T||R({data:a,param:"nol_dayQhr",val:k}),q=Math.floor(q),"1"===R({data:a,param:"nol_applyViewInc"})&&(Q(a),R({data:a,param:"nol_applyViewInc",val:"0"})),"true"===R({data:a,param:"nol_disabled"})||void 0===q||z>0&&z<=c&&"daypart"!==R({data:a,param:"nol_cadence"}))return;if("stream"!==R({data:a,param:"nol_cadence"})&&"impression"!==R({data:a,param:"nol_cadence"})){if(ee=""===ee?q:r(ee,"num"),Y||(Y=Be()),G=Math.ceil((Be()-Y)/1e3)||1,$=L(a,ee),o=$.segment,N=$.minute,u=$.seconds,f=q-ee,R({data:a,param:"nolPriv_currPos",val:q}),X&&void 0!==o&&X!==o&&(("dcrvideo"!==R({data:a,param:"nol_product"})||"dcrvideo"===R({data:a,param:"nol_product"})&&R({data:a,param:"nol_segmentTimeSpent"})>0)&&b(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),"episode"!==R({data:a,param:"nol_cadence"})&&R({data:a,param:"nol_pingCount",val:0}),d=i(R({data:a,param:"nol_segmentLength"})),R({data:a,param:"nol_minutes",val:d}),T&&T!==k&&(R({data:a,param:"nol_dayQhr",val:k}),R({data:a,param:"nol_weekQhr",val:C}),S&&S!==w&&R({data:a,param:"nol_localDay",val:w})),I&&I!==M&&R({data:a,param:"nol_wmDayQhr",val:M}),E&&E!==D&&R({data:a,param:"nol_wmDay",val:D})),X=o,void 0!==N&&f>0){if(j!==N&&(d[N].save||"daypart"===R({data:a,param:"nol_cadence"})||(d[N].tsv>=K?b(a,null,n&&n.onPingFired?n.onPingFired:null):(d[N].tsv=0,d[N].updated=!1))),f<W||f<=Math.ceil(1.5*G)&&f<J){for(_=r(R({data:a,param:"nol_sendQual"}),"num"),p=0;p<f;p+=1){if((u+p)%R({data:a,param:"nol_segmentValue"})!=0){if("daypart"!==R({data:a,param:"nol_cadence"})&&d[N].tsv>=R({data:a,param:"nol_segmentValue"})&&(d[N].save?(d[N].tsv=0,
d[N].save=!1,d[N].updated=!1):b(a,null,n&&n.onPingFired?n.onPingFired:null)),d[N].tsv+=1,Z.nol_cumeTimeSpent+=1,Z.nol_segmentTimeSpent+=1,d[N].tsv>=K&&_){for(d[N].updated||(R({data:a,param:"nolPriv_priority",val:Be()}),d[N].updated=!0),m=0,v=0;m<d.length;m+=1)if((v+=d[m].tsv>=K?1:0)>=_){_="send";break}"send"===_&&R({data:a,param:"nol_sendQual"})&&(l.onViewWon&&A(a,l.onViewWon),b(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),_=0,"daypart"!==R({data:a,param:"nol_cadence"})&&R({data:a,param:"nol_sendQual",val:"0"}))}}else 0!==p&&(N+=1),d.length<=N?(b(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),N=0,X+=1,R({data:a,param:"nol_currSeg",val:X}),R({data:a,param:"nol_pingCount",val:0}),d=i(R({data:a,param:"nol_segmentLength"})),R({data:a,param:"nol_minutes",val:d}),T&&T!==k&&(R({data:a,param:"nol_dayQhr",val:k}),R({data:a,param:"nol_weekQhr",val:C}),S&&S!==w&&R({data:a,param:"nol_localDay",val:w})),I&&I!==M&&R({data:a,param:"nol_wmDayQhr",val:M}),E&&E!==D&&R({data:a,param:"nol_wmDay",val:D})):"daypart"!==R({data:a,param:"nol_cadence"})&&!d[N].save&&d[N].tsv>=K?b(a,null,n&&n.onPingFired?n.onPingFired:null):d[N].save||(d[N].tsv=1,d[N].updated=!1),Z.nol_cumeTimeSpent+=1,Z.nol_segmentTimeSpent+=1;R({data:a,param:"nolPriv_currMin",val:N}),n&&n.onTick&&n.onTick(q-(f-p)+1,Z.nol_cumeTimeSpent)}n&&n.onTicksComplete&&n.onTicksComplete(f)}R({data:a,param:"nolPriv_now",val:Be()}),-1!==P&&"dcrstatic"!==R({data:a,param:"nol_product"})&&(P.pauseObj.pauseTime=0)}}else o=Math.floor(q/H+1),"content"===R({data:a,param:"nol_ac"})&&(X=o,R({data:a,param:"nol_currSeg",val:X})),b(a,null,n&&n.onPingFired?n.onPingFired:null);R({data:a,param:"nol_currSeg",val:X})}}function C(e,t,a){var n=R({data:e,param:"iag_"+t});return void 0!==n&&""!==n?a="&pr=iag."+t+","+d(n):a&&a.length>0&&-1===a.indexOf("&pr=iag")?a="&pr=iag."+t+","+d(a):void 0!==a&&null!==a||(a=""),a}function k(e,t){var a,n,i,o,s,l,c,u,p,m,v,f,g,_,y,h,P=R({data:e,param:"nol_vidtype"});R({data:e,param:"nol_prod"}).indexOf("iag")>=0&&(a="",n=C(e,"sid",R({data:e,param:"nol_sid",vidType:"content"})),i=C(e,"tfid",R({data:e,param:"nol_tfid",vidType:"content"})),o=C(e,"bcr",R({data:e,param:"nol_clientid",vidType:"content"})),l=C(e,"epi",R({data:e,param:"nol_title"})||R({data:e,param:"nol_title",vidType:"content"})),s=C(e,"pgm",R({data:e,param:"nol_censuscategory"})||R({data:e,param:"nol_category"})||R({data:e,param:"nol_iagcategory"})),s||(s=C(e,"pgm",R({data:e,param:"nol_censuscategory",vidType:"content"})||R({data:e,param:"nol_category",vidType:"content"})||R({data:e,param:"nol_iagcategory",vidType:"content"})))||(s="&pr=iag.pgm,general"),c="&pr=iag.seg,",r(R({data:e,param:"nol_chapter",vidType:"content"}),"num")>1?c+=R({data:e,param:"iag_seg"})||R({data:e,param:"nol_chapter",vidType:"content"}):c+="1",u=C(e,"pd",u),p=C(e,"oad",p),g=C(e,"fp",g),h=C(e,"cust1",h),"ad"===t?(m="&pr=iag.brn,"+R({data:e,param:"nol_clientid"}),v="&pr=iag.cte,"+d(R({data:e,param:"nol_adURL"})),f="midroll"===P?"&pr=iag.ap,mid":"postroll"===P?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=C(e,"sid",n),i=C(e,"tfid",i),o=C(e,"bcr",o),m=C(e,"brn",m),v=C(e,"cte",v),s=C(e,"pgm",s),l=C(e,"epi",l),c=C(e,"seg",c),u=C(e,"pd",u),p=C(e,"oad",p),_=C(e,"pod",_),y=C(e,"apt",y),a=n+i+o+s+l+c+u+m+f+v+p+g+_+y+h):a=n+i+o+s+l+c+u+p+g+h,a+="&pr=iag.cp,soc",R({data:e,param:"nol_iagData",val:a}))}function E(e){var a;if(fe[e.id]&&fe[e.id].tags.length===fe[e.id].tagSize){if(t._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),fe[e.id].debug!==Le&&"logging"===fe[e.id].debug){if(a=fe[e.id].nol_debugUrl,a||(a=fe[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),fe[e.id].eventQueue.length>fe[e.id].eventQueueIndex+1)for(var n=fe[e.id].eventQueueIndex;n<fe[e.id].eventQueue.length;n++)_(a+"pli="+e.id+"&ggpm="+JSON.stringify(fe[e.id].eventQueue[n])),fe[e.id].eventQueueIndex=n;a+="pli="+e.id+"&ggpm="+JSON.stringify(e),_(a)}e.timeStamp=Be();for(var n=0,r=fe[e.id].tags.length;n<r;n+=1)fe.hasOwnProperty(e.id)&&fe[e.id].tags[n].eventListener(e)}else fe[e.id]&&fe[e.id].eventQueue||(fe[e.id]=o(fe[e.id])),fe[e.id].eventQueue.push(e)}function I(e,t){var a,n;fe[t].bReInit||(fe[t].bReInit=!0,fe[t].eventQueue=[],e&&fe[t].eventQueue.push(e),s(Ce))}function D(e,t,a){var n=!1,r=a.toString().toLowerCase().indexOf(t.toString().toLowerCase());return"-"===e&&-1===r?n=!0:"+"===e&&(a===t||-1!==r&&a&&t)?n=!0:"--"===e&&-1===t.toString().toLowerCase().indexOf(a.toString().toLowerCase())?n=!0:"++"===e&&-1!==t.toString().toLowerCase().indexOf(a.toString().toLowerCase())&&(n=!0),n}function A(e,t,a){var n=t||R({data:e,param:"nol_finalFilter"}),r,i,o,s,l,d,c,u,p,m,v,f=a||{};if(n&&void 0!==n)for(r=0,i=n.length;r<i;r+=1){if(u=n[r],u.tagVar.length)for(var o=0,s=u.tagVar.length;o<s&&(m=R({data:e,param:u.tagVar[o].name}));o++);else m=R({data:e,param:u.tagVar.name});if(m&&u.tagVar.value===m){for(o=0,s=u.cond.length;o<s;o+=1){if(c=f[u.cond[o]]||R({data:e,param:u.cond[o]}),d=0===u.is.value.indexOf("nol_")&&R({data:e,param:u.is.value})?R({data:e,param:u.is.value}):u.is.value,void 0===c||void 0===d||!D(u.is.type,c,d)){p=!1;break}p=!0}if(void 0!==p&&void 0!==(v=p?u.then:u.else))for(l in v)v.hasOwnProperty(l)&&(void 0!==f.nol_vidtype?f[l]=v[l]:R({data:e,param:l,val:v[l]}))}}}function M(e,t){var a,n=e.data._settings,r=e.param;return void 0===t||null===t?void 0===(a=n.hasOwnProperty(r)&&fe[n.nol_playerId].nol_tagMap.hasOwnProperty(r)&&("object"==typeof fe[n.nol_playerId].nol_tagMap[r]||"array"==typeof fe[n.nol_playerId].nol_tagMap[r])?fe[n.nol_playerId].nol_tagMap[r][n[r]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]:fe[n.nol_playerId].nol_tagMap.nol_defaults[r]||fe[n.nol_playerId][r])&&(a=n.hasOwnProperty(r)?n[r]:fe[n.nol_playerId].nol_tagMap[r]):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]=t:n[r]=t,a}function R(a){try{if(a){if("string"==typeof a.param&&-1===a.param.indexOf("nol_")&&-1===a.param.indexOf("nolPriv_")&&a.param.split("_").length-1>1)return;var n="string"==typeof a.param?a.param.split("_"):a.param,r,i=n[0]?n.splice(0,2).join("_"):n,o=a.vidType||n[0]||a.data._currVidType,s=a.data._currAssetid||"0",l=void 0!==a.data._dataArrObj[o][s]?a.data._dataArrObj[o][s]:a.data._dataArrObj[o][Object.keys(a.data._dataArrObj[o]).splice(-1,1)],d=ke[a.data._settings.nol_playerId]||{},c=d&&d[i]?d[i].clientField:i;if("object"==typeof c)r=l;else if("nol_segmentTimeSpent"===c||"nol_cumeTimeSpent"===c||"nol_count"===c){var u=R({data:a.data,param:"nol_timeSpentViewing"});r=u[o][c]}else void 0===a.val||null===a.val?void 0!==(r=l&&l.hasOwnProperty(c)?l[c]:fe[a.data._settings.nol_playerId][c])&&""!==r||void 0!==(r=M(a)||"")&&""!==r||(0===c.indexOf("nol_")?a.param=c:a.param=i,r=M(a)||""):l&&(l[c]=a.val);return r}return null}catch(a){e.console&&e.console.error&&e.console.error("Error in Data(): "+a.message+" __param: "+n),t._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+a.message})}}function B(a,n){var r=Ne.findPlayer(a),i=r.oServiceCall[n.service],o=n.url,s=n.key,l;if(n.evntCB=R({data:a,param:a.serviceFlag[n.service].callback}),n.callBack=function(e){V(a,e,n)},!i&&s&&o&&o.length>0)"stnupdate"===n.evntCB&&(void 0===r.oServiceCall[n.service]||void 0===r.oServiceCall[n.service].status||"init"!==r.oServiceCall[n.service].status&&"complete"!==r.oServiceCall[n.service].status)&&(r.oServiceCall[n.service]={status:"init",station:null,data:null}),t._listeners.addListener(n.evntCB,n.callBack,!0),y(f(a,o),n.service,r);else if(i&&"init"===i.status);else if(i&&"complete"===i.status&&s!==i.station)t._listeners.addListener(n.evntCB,n.callBack,!0),y(f(a,o),n.service,r);else if(i&&"complete"===i.status&&s===i.station){for(l in i.data)i.data.hasOwnProperty(l)&&R({data:a,param:l,val:i.data[l]});if(Ie?A(a,Ie[n.service]):A(a,Ee),"true"===R({data:a,param:"nol_disabled"}))return;a.serviceFlag[n.service].need&&(R({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[n.service].need=!1,w(R({data:a,param:"nol_queueTime"}),a))}else t._listeners.fireEvent(n.evntCB,n),e.setTimeout(function(){B(a,n)},1e3)}function V(e,t,a){var n={},i,o=0,s;if(R({data:e,param:"nol_playerId"})===t.target.nol_playerId){for(s in t.target)t.target.hasOwnProperty(s)&&(R({data:e,param:s,val:t.target[s]}),n[s]=t.target[s]);var l=Ne.findPlayer(e);if(l){var d=void 0!==l.oServiceCall[a.service]&&l.oServiceCall[a.service].hasOwnProperty("status")?l.oServiceCall[a.service].status:"undefined";l.oServiceCall[a.service]={status:"complete",prevStatus:d,station:a.key,data:n},l.serviceSending[a.service]=!1}if(Ie?A(e,Ie[a.service]):A(e,Ee),"true"===R({data:e,param:"nol_disabled"}))return;e.serviceFlag[a.service].need&&(R({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[a.service].need=!1,t.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===R({data:e,param:"nol_cadence"})&&(o=r(t.target.nol_fdTimeCode,"num"),i=r(R({data:e,param:"nol_queueTime"}),"num"),R({data:e,param:"nol_queueTime",val:i+o})),w(R({data:e,param:"nol_queueTime"}),e))}}function F(e,t){if("id3"===R({data:e,param:"nol_product"})&&R({data:e,param:"nol_id3Data"}))return void b(e,null,t||null);e.isProductOf("vrivideo")&&"ended"!==e.set("nol_vriEvent")||"true"!==R({data:e,param:"nol_disabled"})&&"1"===R({data:e,param:"nol_davState"})&&(R({data:e,param:"nol_davState",val:"2"}),"daypart"===R({data:e,param:"nol_cadence"})?b(e,{save:!0},t||null):b(e,null,t||null),O(e),R({data:e,param:"nol_disabled",val:"true"}))}function N(e,t,a){(t&&!0===t.flush||!("dcrstatic"===R({data:e,param:"nol_product"})&&"stream"!==R({data:e,param:"nol_cadence"})||e.isProductOf("vrivideo")))&&("content"===R({data:e,param:"nol_ac"})&&R({data:e,param:"nol_segmentTimeSpent"})>0||"streamduration"===R({data:e,param:"nol_cadence"})&&R({data:e,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===R({data:e,param:"nol_product"})&&"stream"===R({data:e,param:"nol_cadence"})||"postroll"===R({data:e,param:"nol_vidtype"})&&"interval"===R({data:e,param:"nol_cadence"})||e.isProductOf(["dcrvideo","dcrstatic"])&&e.get("nol_segmentTimeSpent")>0&&t&&!0===t.flush)&&("content"===R({data:e,param:"nol_ac"})||t&&!0===t.save?b(e,{save:!0},a&&a.onPingFired?a.onPingFired:null):b(e,null,a&&a.onPingFired?a.onPingFired:null),R({data:e,param:"nolPriv_now",val:0}))}function x(e,a){var n=null,r=Math.round(Be(e)/1e3);try{e&&Fe.isEnabled(e)&&(n=xe.inferEvent(a.currEvtType,e,a._param1,r,a._param3))&&(n.event!==xe.events.play&&Ne.state.set(e,n),Fe.preProcess(e,n))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:n,timestamp:r}}function G(e,a){try{e&&a.inferredEvent&&(a.inferredEvent.event===xe.events.play&&Ne.state.set(e,a.inferredEvent),Fe.postProcess(e,a.inferredEvent))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function U(e,a){try{var n=R({data:e,param:"nol_playerId"});fe&&fe.hasOwnProperty(n)&&(!fe[n].hasOwnProperty("nol_sessionId")||fe[n].hasOwnProperty("forceStreamRegen")&&!0===fe[n].forceStreamRegen)&&(a=a||t.generateGUID(),fe[n].nol_sessionId=a,fe[n].forceStreamRegen=!1)}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function j(a,n){var o=R({data:a,param:"nol_playerId"});if(o===n.id){if(!n.evtInfo||n.evtInfo.hasOwnProperty("param1")&&(null===n.evtInfo.param1||void 0===n.evtInfo.param1))return void t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"});var s=n.evtInfo,l=s.param1,d=s.param3?s.param3:l.hasOwnProperty("param3")?l.param3:l,c=s.param2||"",u,p,m,v,f=r(R({data:a,param:"nolPriv_id3Count"}),"num"),_,y,h,P=R({data:a,param:"nol_segmentSpentViewing"}),S=R({data:a,param:"nol_enableFilterMap"}),T="|mtvr|,|dprid3|,|id3|",O,L,C={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},E,D,M,V=R({data:a,param:"nol_prod"}),j,z={},q=s.eventType.toString(),W,H="content",X,Y,$,Z=R({data:a,param:"nolPriv_serverTimeOffset"}),ee=ke[o]||{},te=ee.nol_vidtype?ee.nol_vidtype.clientField:"nol_vidtype",ae=ee.nol_tagSrc?ee.nol_tagSrc.clientField:"nol_tagSrc",ne=ee.nol_ac?ee.nol_ac.clientField:"nol_ac",re=ee.nol_linearAdLoadFlag?ee.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",ie=d[te]?d[te].toString().toLowerCase():"",oe=Math.round(Be()/1e3),se="nol_assetid",le=Ne.findPlayer(a),de={},ce=[],ue={onTick:function(e,t){n&&n.tag&&n.tag.viewability&&n.tag.viewability.initialized&&n.tag.viewability.initialized()&&(n.tag.viewability.tick(e,a),n.tag.viewability.setData(a))},onPingFired:function(e){n&&n.tag&&n.tag.viewability&&n.tag.viewability.initialized&&n.tag.viewability.initialized()&&(n&&n.tag&&n.tag.resetViewability&&n.tag.resetViewability(),n.tag.viewability.setData(e))}},pe=x(a,{currEvtType:q,_param1:l,_param3:d});switch(q=q.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===q||"staticstart"===q)&&"dcrstatic"!==R({data:a,param:"nol_product"}))return;if("14"!==q&&"staticstart"!==q&&"dcrstatic"===R({data:a,param:"nol_product"}))return;if("pauseloadmeta"===q&&a.isProductOf("vrivideo"))return;var me=","+R({data:a,param:"nol_contentType"}),ve=a._currVidType;a._currVidType=ie&&-1!==me.indexOf(","+ie)?"content":"dcrstatic"===R({data:a,param:"nol_product"})?"static":"ad",ve!==a._currVidType&&n&&n.tag&&n.tag.startViewability(a);var ge=null,_e=null,ye=Ne.cms.parse(ee.nol_assetid,a,{metadata:d,defaultKey:"nol_assetid",silent:!0});if(("ad"===R({data:a,param:"nol_ac"})&&R({data:a,param:"nol_segmentTimeSpent"})>0&&"streamduration"===R({data:a,param:"nol_cadence"})||"stream"===R({data:a,param:"nol_cadence"})&&"dcrstatic"===R({data:a,param:"nol_product"})||"dcrstatic"===R({data:a,param:"nol_product"})&&String(a._currAssetid)!==ye)&&F(a,ue.onPingFired),!0===R({data:a,param:"nol_onCompleteFired"})?("content"!==a._currVidType&&"static"!==a._currVidType||("content"===a._currVidType.toLowerCase()&&fe[o].hasOwnProperty("forceStreamRegen")&&!0===fe[o].forceStreamRegen&&U(a),R({data:a,param:se,val:-1}),"content"===a._currVidType?(ge=Ne.state.clone(a),_e=Fe.clone(a),K({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:de},n?n.tag:null)):K({data:a,resetStatic:!0},n?n.tag:null)),R({data:a,param:"nol_onCompleteFired",val:!1})):"14"!==q&&"staticstart"!==q||"stream"!==R({data:a,param:"nol_cadence"})||(R({data:a,param:se,val:-1}),K({data:a},n?n.tag:null)),"ad"===a._currVidType&&a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){var he=i(R({data:a,param:"nol_segmentLength"}));R({data:a,param:"nol_minutes",val:he}),R({data:a,param:se,val:-1}),R({data:a,param:te,val:ie}),"1"!==R({data:a,param:"nol_nielsenAdSupportFlg",vidType:"content"})&&R({data:a,param:"nol_nielsenAdSupportFlg",val:"1",vidType:"content"})}if(a._currAssetid=ye&&"daypart"===R({data:a,param:"nol_cadence"})||"stream"!==R({data:a,param:"nol_cadence"})&&"dcrstatic"===R({data:a,param:"nol_product"})?ye:a._currAssetid,d.nol_ac=a._currVidType,r(R({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(Be()/1e3)+Z)return F(a,ue.onPingFired),void I(n,R({data:a,param:"nol_playerId"}));for(W=0,X=S.length;W<X;W+=1)u=ee[S[W]]?ee[S[W]].clientField:S[W],z[S[W]]=String(d[u]||"");if(_=ye||R({data:a,param:"nolPriv_assetid"}),A(a,Ee.onCmsDetected,z),"false"!==z.nol_disabled||!d)return void("cms"!==a._currTagSrc&&(J(a,"loadMetadata",d,n?n.tag:null),R({data:a,param:"nol_disabled",val:"true"})));if("static"===a._currVidType&&"dcrstatic"===R({data:a,param:"nol_product"})?(t._listeners.fireEvent("updateCmbStaticPage",{evtInfo:s,plid:o}),H="static"):H="content",_!==R({data:a,param:se})){if("ad"!==R({data:a,param:"nol_ac"})&&F(a,ue.onPingFired),J(a,"loadMetadata",d,n?n.tag:null),Object.keys(de).length>0){for(var Pe in de)de.hasOwnProperty(Pe)&&""!==de[Pe]&&R({data:a,param:Pe,val:de[Pe]});de={}}if(R({data:a,param:"nolPriv_assetid",val:R({data:a,param:se})}),"15"!==q&&"loadmetadata"!==q||"id3"!==R({data:a,param:ae,vidType:"content"})||!1!==R({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||R({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),A(a,Ee.onAssetIdChanged),"true"===R({data:a,param:"nol_disabled"}))return;if("drm"===R({data:a,param:"nol_product"}))a.serviceFlag.stn.need=!0;else if(a.serviceFlag.stn.need=!1,"true"===R({data:a,param:"nol_disabled"}))return;if(A(a,Ee.onComplete),ge&&Ne.state.bind(a,ge),_e&&Fe.bind(a,_e),"true"===R({data:a,param:"nol_disabled"}))return}if("ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"!==R({data:a,param:"nol_cadence"})){R({data:a,param:"nol_timeSpentViewing"})[a._currVidType].nol_count++}a.isProductOf("vrivideo")&&"impression"===a.get("nol_cadence")&&(a.set("nol_vriEvent","start"),a.set("nol_startPos","")),R({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Be()/1e3)}),-1!==V.indexOf("iag")&&k(a,a._currVidType,ee),("ad"===a._currVidType&&!a.isProductOf(["dcrvideo","vrivideo"])||"stream"===R({data:a,param:"nol_cadence"}))&&(R({data:a,param:"nol_pingCount",val:0}),R({data:a,param:"nolPriv_sendData",val:!0}),R({data:a,param:"nol_davState",val:"0"}),a.serviceFlag.stn.need||"content"===a._currVidType||"nol_cmsoffset"!==R({data:a,param:"nol_timer"})&&"nol_pageoffset"!==R({data:a,param:"nol_timer"})||w(0,a,ue)),"14"!==q&&"staticstart"!==q||"dcrstatic"!==R({data:a,param:"nol_product"})||!0===le.static.started||(t.PLDCR.start(!0),le.static.started=!0);break;case"5":case"play":if("mtvr"===R({data:a,param:"nol_product"})){if(M=ee.nol_channelName?ee.nol_channelName.clientField:"nol_channelName",d[M]&&d[M].length>0)for(Y in d)d.hasOwnProperty(Y)&&R({data:a,param:Y,val:d[Y]})}else a.isProductOf(["dcrvideo","vrivideo"])&&(a._currVidType="content",z={nol_vidtype:R({data:a,param:te,vidType:a._currVidType}),nol_tagSrc:R({data:a,param:ae,vidType:a._currVidType}),nol_linearAdLoadFlag:R({data:a,param:re,vidType:a._currVidType}),nol_ac:R({data:a,param:ne,vidType:a._currVidType})},A(a,Ee.onCmsDetected,z));break;case"6":case"pause":N(a,null,ue);break;case"7":case"stop":N(a,null,ue),"ad"===a._currVidType&&ue.onPingFired(a);break;case"flush":var Se=a.get("nol_cadence");!a.isProductOf(["dcrvideo","dcrstatic"])||"interval"!==Se&&"streamduration"!==Se||(N(a,{flush:!0,save:!0},ue),a.isProductOf("dcrstatic")&&le.static.started&&(t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0")));break;case"updateott":if(N(a,null,ue),l&&l.hasOwnProperty("ottStatus")&&l.ottStatus.length>0){if(l.hasOwnProperty("kGCKMetadataNlsKeyOptout")&&l.hasOwnProperty("kGCKMetadataNlsKeyDeviceID")){var Te=l.kGCKMetadataNlsKeyOptout.toString().toLowerCase();R({data:a,param:"nol_userSessionId",val:l.kGCKMetadataNlsKeyDeviceID,vidType:"content"}),R({data:a,param:"nol_useroptout",val:"1"===Te||"true"===Te?"true":"false",vidType:"content"}),-1===Te.indexOf([1,"1","true",0,"0","false"])&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: Invalid kGCKMetadataNlsKeyOptout value."})}for(var se in l)l.hasOwnProperty(se)&&(R({data:a,param:se,val:l[se],vidType:"content"}),le.ottStatusObj[se]=l[se]);Ee.onOTTDetected&&A(a,Ee.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===q||"staticend"===q)&&"dcrstatic"!==R({data:a,param:"nol_product"}))return;if("56"!==q&&"staticend"!==q&&"dcrstatic"===R({data:a,param:"nol_product"}))return;if(a.isProductOf("vrivideo")&&("57"===q||"end"===q)&&("sessionReset"===c||"modcadence"!=a.get("nol_cadence")))return;if(!("57"!==q&&"oncomplete"!==q||"mtvr"!==R({data:a,param:"nol_product"})&&"id3"!==R({data:a,param:ae,vidType:"content"})||!0===R({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})))return;if("ad"===a._currVidType&&("streamduration"===R({data:a,param:"nol_cadence"})?b(a,null,ue.onPingFired):a.isProductOf(["dcrvideo"])&&"interval"===R({data:a,param:"nol_cadence"})&&(""===R({data:a,param:"nol_dataDate",vidType:"content"})&&""!==R({data:a,param:"nol_dataDate"})&&(R({data:a,param:"nol_dataDate",val:R({data:a,param:"nol_dataDate"}),vidType:"content"}),R({data:a,param:"nol_hourCode",val:R({data:a,param:"nol_hourCode"}),vidType:"content"}),R({data:a,param:"nol_dayId",val:R({data:a,param:"nol_dayId"}),vidType:"content"})),a._currVidType="content",Ee.onEndDetected&&A(a,Ee.onEndDetected),b(a,null,ue.onPingFired))),a.isProductOf("vrivideo")&&"modcadence"===a.get("nol_cadence")){if("NaN"===parseInt(a.get("nol_length")).toString())return;if(!(a.get("nol_currPos")>=a.get("nol_length")))return;a.set("nol_vriEvent","ended")}"static"!==R({data:a,param:"nol_ac"})&&(a._currVidType="content"),Ee.onEndDetected&&A(a,Ee.onEndDetected),R({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==R({data:a,param:"nol_disabled"})&&"id3"!==R({data:a,param:"nol_product"})||("static"===R({data:a,param:"nol_ac"})&&t._listeners.fireEvent("removeCmbAssetId",s),F(a,ue.onPingFired)),R({data:a,param:"nol_onCompleteFired",val:!0}),fe[o].forceStreamRegen=!0,"56"!=q&&"staticend"!=q||"dcrstatic"!==R({data:a,param:"nol_product"})||(t.PLDCR.stop(),le.static.started=!1),"57"!==q&&"oncomplete"!==q||R({data:a,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"});break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===R({data:a,param:"nol_disabled"})||!l||"nol_pageoffset"!==R({data:a,param:"nol_timer"}))return;"1"===R({data:a,param:"nol_onPaginateFired_static"})&&(R({data:a,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==R({data:a,param:"nol_cadence"})&&Q(a,{vidType:"static"})),$=r(R({data:a,param:"nol_highWM"}),"num"),$<r(l,"num")&&R({data:a,param:"nol_highWM",val:l}),w(l,a,ue),R({data:a,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(l>-1){if(!0===R({data:a,param:"nol_onCompleteFired"})&&t._listeners.fireEvent("flushPauseEventQueue"),"true"===R({data:a,param:"nol_disabled"})||!l||"nol_cmsoffset"!==R({data:a,param:"nol_timer"})||"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"===R({data:a,param:"nol_cadence"}))return;if("number"!=typeof l){if("string"!=typeof l)return;l=r(l,"num")}if(a.isProductOf("vrivideo")){var be=Math.floor(l);"impression"===a.get("nol_cadence")&&1===be&&be<a.get("nolPriv_prevPos")&&(a.set("nol_pingCount",0),a.set("nol_currPos","")),"modcadence"===a.get("nol_cadence")&&a.set("nol_vriEvent","loop")}R({data:a,param:"nol_isLive",val:(l>86400).toString()}),$=r(R({data:a,param:"nol_highWM"}),"num"),$<l&&R({data:a,param:"nol_highWM",val:l}),a.serviceFlag.stn.need?(R({data:a,param:"nol_queueTime",val:l}),B(a,{service:"stn",key:R({data:a,param:"nol_assetid"}),url:R({data:a,param:"nol_stationURL"}),nol_playerId:R({data:a,param:"nol_playerId"})})):w(l,a,ue),R({data:a,param:"nol_davState",val:"1"})}else n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=g(a,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Ve[n.timeStamp]&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if(("object"==typeof l&&Object.keys(l).length>0||"string"==typeof l&&l.length>0)&&(!0===R({data:a,param:"nol_onCompleteFired"})&&le&&le.getPauseQueueCount&&le.getPauseQueueCount()>0?t._listeners.fireEvent("flushPauseEventQueue"):!0===R({data:a,param:"nol_onCompleteFired"})&&le&&!le.getPauseQueueCount&&t._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof l))for(X=0;X<l.length;X+=1)if(l[X].key&&"PRIV"===l[X].key){l=l[X].info;break}if(L=l.toString(),249!==L.length&&n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=!0,e.console&&e.console.warn&&e.console.warn("Warning: ID3 tag length is not 249."),t._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),O=L.split("/"),l={},O.length<r(Me.nol_breakout,"num"))return;for(Y in Me)Me.hasOwnProperty(Y)&&(l[Y]=O[Me[Y]],"nol_breakout"===Y&&(l[Y]=O[r(Me[Y],"num")].substr(0,2)),z[Y]=l[Y]);if(!l||R({data:a,param:"nol_tsvBreakoutMap"})&&-1===R({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(l.nol_breakout)||-1===l.nol_nWebAddress.indexOf("nielsen.com")||l.nol_fdcid===R({data:a,param:"nol_cidNull"})&&l.nol_pccid===R({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",W=0,X=S.length;W<X;W+=1)u=ee[S[W]]?ee[S[W]].clientField:S[W],z[S[W]]=l[u]||R({data:a,param:S[W]});if(z.nol_vidtype="content",A(a,Ee.onId3Detected,z),"false"!==z.nol_disabled||"nol_cmsoffset"===R({data:a,param:"nol_timer"}))return;if("daypart"===R({data:a,param:"nol_cadence"})){var Oe=R({data:a,param:"nol_assetid"})||a._currAssetid;!Oe&&l.nol_fdcid&&l.nol_fdcid!==R({data:a,param:"nol_cidNull"})?a._currAssetid=l.nol_fdcid:!a._currAssetid&&Oe&&(a._currAssetid=Oe)}l.nol_ac=a._currVidType,l.nol_assetid=R({data:a,param:"nol_assetid"})||a._currAssetid,f>0&&(-1!==R({data:a,param:"nol_product"}).indexOf("id3")||-1!==R({data:a,param:"nol_product"}).indexOf("mtvr"))&&(l.nol_pccid!==R({data:a,param:"nol_cidNull"})&&l.nol_pccid!==R({data:a,param:"nol_pccid"})||l.nol_fdcid!==R({data:a,param:"nol_cidNull"})&&l.nol_fdcid!==R({data:a,param:"nol_fdcid"}))&&b(a,null,ue.onPingFired);var Le=Ne.mtvr.pcChanged(a,l.nol_pccid),we=Ne.mtvr.fdChanged(a,l.nol_fdcid);if(Le&&(Ne.mtvr.isPCTag(a)||Ne.mtvr.isTransPing(a))&&(C.filters.onId3PcCidChanged=!0,C.count+=1,n&&n.tag&&n.tag.startViewability(a),a.set("nol_id3Seq",0)),we&&(Ne.mtvr.isFDTag(a)||Ne.mtvr.isTransPing(a))&&(C.filters.onId3FdCidChanged=!0,C.count+=1,n&&n.tag&&n.tag.startViewability(a),a.set("nol_id3Seq",0)),C.count){if(J(a,"sendID3",l,n?n.tag:null),!C.filters.onId3FdCidChanged&&R({data:a,param:"nol_fdcid"})!=R({data:a,param:"nol_cidNull"})||-1===R({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(l.nol_breakout)||(a.serviceFlag.tsv.need=!0),C.count>0)for(Y in C.filters)if(C.filters[Y]&&(A(a,Ee[Y]),"true"===R({data:a,param:"nol_disabled"})))return;if(Ee.onComplete&&(A(a,Ee.onComplete),"true"===R({data:a,param:"nol_disabled"})))return}else for(Y in l)l.hasOwnProperty(Y)&&R({data:a,param:Y,val:l[Y]});if((we||Le)&&a.isProductOf("mtvr")&&"impression"===a.get("nol_cadence")){var Ce=fe[o].nolPriv_newMTVRStreamId;fe[o].nolPriv_newMTVRStreamId=Ce&&fe[o].restEvtTimestamp==n.timeStamp?Ce:t.generateGUID(),Ne.mtvr.resetTagSession(a,fe[o].nolPriv_newMTVRStreamId),fe[o].restEvtTimestamp=n.timeStamp}if((a.isProductOf("mtvr")||a.isProductOf("id3"))&&fe[o].restEvtTimestamp!=n.timeStamp){var Ie=fe[o].nolPriv_newMTVRStreamId;Ie&&Ie!==a.get("nol_sessionId","content")&&Ne.mtvr.resetTagSession(a,Ie)}if(R({data:a,param:"nol_id3Raw",val:L}),a.serviceFlag.tsv.need&&-1!==T.indexOf("|"+R({data:a,param:"nol_product"})+"|")&&(D=R(!0===C.filters.onId3PcCidChanged?{data:a,param:"nol_pccid"}:{data:a,param:"nol_fdcid"}),B(a,{service:"tsv",key:D,url:R({data:a,param:"nol_tsvURL"})})),(a.isProductOf("id3")||a.isProductOf("mtvr")&&"interval"===a.get("nol_cadence"))&&l.nol_watermark&&String(l.nol_watermark).length>0&&(y=R({data:a,param:"nol_id3Data"}),h=Math.round(Be()/1e3+Z),j=R({data:a,param:"nol_id3Seq"})||0,y?R({data:a,param:"nol_id3Data",val:y+="|"+h+","+R({data:a,param:"nol_id3Raw"})}):(R({data:a,param:"nol_id3Data",val:j+":"+R({data:a,param:"nol_clocksrc"})+":"+R({data:a,param:"nol_tsvFlag"})+":"+h+","+R({data:a,param:"nol_id3Raw"})}),R({data:a,param:"nol_id3Seq",val:r(j,"num")+1,vidType:"content"})),a.isProductOf("id3")))return f>0&&b(a,{returnLength:!0},ue.onPingFired),f+=1,R({data:a,param:"nolPriv_id3Count",val:f}),void R({data:a,param:"nol_davState",val:"1"});if(f+=1,R({data:a,param:"nolPriv_id3Count",val:f}),E=R({data:a,param:R({data:a,param:"nol_timer"})})||R({data:a,param:"nol_fdoffset"}),"daypart"===R({data:a,param:"nol_cadence"})&&(E=r(E,"num"),E+="nol_pcoffset"==R({data:a,param:"nol_timer"})?r(R({data:a,param:"nol_pcTimeCode"}),"num"):r(R({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)R({data:a,param:"nol_queueTime",val:E});else{if("true"===R({data:a,param:"nol_disabled"}))return;w(E,a,ue),R({data:a,param:"nol_davState",val:"1"})}break;case"60":case"mute":break;case"61":case"volume":n&&n.tag&&n.tag.viewability&&n.tag.viewability.setVolume(l);break;case"30":case"onpaginate":"dcrstatic"===R({data:a,param:"nol_product"})&&Ee.onPaginateDetected&&"stream"!==R({data:a,param:"nol_cadence"})&&A(a,Ee.onPaginateDetected),R({data:a,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if("dcrvideo"===R({data:a,param:"nol_product"})){Ne.updateMetadata(a,d,ee);var De=R({data:a,param:"nol_adLoadType",vidType:"content"});""!==De&&void 0!==De&&null!==De&&A(a,Ee.onAdLoadFlag)}}G(a,pe)}}function z(e){var t,a=null,n="content"==e._currVidType?r(R({data:e,param:"nol_chnlCountThrshld"}),"num")||ce:r(R({data:e,param:"nol_staticCountThrshld"}),"num")||ce,i=e._dataArrObj[e._currVidType],o,s=0,l=e._dataArrObj.count;if(!e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){if(l[e._currVidType]>=n){for(o in i)if(i.hasOwnProperty(o)){if((s=i[o].nolPriv_priority)<=0){t=o;break}(null===a||a>s)&&(a=s,t=o)}i.hasOwnProperty(t)&&(delete i[t],l[e._currVidType]-=1)}e._dataArrObj[e._currVidType][e._currAssetid]={nolPriv_priority:0},l[e._currVidType]+=1}}function K(e,a){try{if(!e||!e.hasOwnProperty("data"))return;if(e.hasOwnProperty("savedVals")&&e.hasOwnProperty("savedReplayParams"))if(Array.isArray(e.savedVals))for(var n in e.savedVals)e.savedVals.hasOwnProperty(n)&&(e.savedReplayParams[e.savedVals[n]]=R({data:e.data,param:e.savedVals[n]}));else"string"==typeof e.savedVals&&(e.savedReplayParams[e.savedVals]=R({data:e.data,param:e.savedVals}));e.hasOwnProperty("resetStatic")&&!0===e.resetStatic&&(e.data._dataArrObj.static={}),e.data._dataArrObj.ad={},e.data._dataArrObj.content={},e.data._dataArrObj.count={content:0,ad:0,static:0},e.data._currAssetid="0",a&&a.resetViewability&&a.resetViewability()}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetDataObj"+e})}}function q(e){try{var a=R({data:e,param:"nol_playerId"});if(a&&t._players&&t._players.hasOwnProperty(a)){var n=t._players[a];if(n&&Object.keys(n.ottStatusObj).length>0){var r;for(r in n.ottStatusObj)R({data:e,param:r,val:n.ottStatusObj[r],vidType:"content"})}}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function Q(e,a){try{if("1"===R({data:e,param:"nol_unifiedEnabled"})){var n=a&&a.hasOwnProperty("vidType")?a.vidType:e._currVidType.toLowerCase(),i=r(R({data:e,param:"nol_viewCount_"+n}),"num");R({data:e,param:"nol_viewCount_"+n,val:i+=1}),"1"===R({data:e,param:"nol_applyViewInc"})&&R({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function J(e,t,a,n){Ne.extendfData(e);var r="",i,o,s="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count",l=R({data:e,param:{}}),d,c,u=R({data:e,param:"nol_playerId"});if(z(e),"ad"===e._currVidType.toLowerCase()&&(r="st,a",R({data:e,param:"nol_currSeg",val:"0"})),""===R({data:e,param:"nol_errorURL"})&&R({data:e,param:"nol_errorURL",val:ie+re+se+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===t)for(i in l)l.hasOwnProperty(i)&&-1===s.indexOf(i)&&R({data:e,param:i,val:M({data:e,param:i})||""});for(i in a)a.hasOwnProperty(i)&&R({data:e,param:String(i),val:String(a[i])});R({data:e,param:"nolPriv_sendData",val:!0}),R({data:e,param:"nol_davState",val:"0"}),R({data:e,param:"nol_highWM",val:"0"}),R({data:e,param:"nol_iagData",val:""}),R({data:e,param:"nol_disabled",val:"false"}),R({data:e,param:"nol_sendQual",val:M({data:e,param:"nol_sendQual"})||""}),R({data:e,param:"nolPriv_assetid",val:""}),"S"===M({data:e,param:"nol_segmentPrefix"})&&R({data:e,param:"nol_segmentPrefix",val:"S"}),R({data:e,param:"nol_c3"})||R({data:e,param:"nol_c3",val:r}),"content"===e._currVidType.toLowerCase()&&U(e),R({data:e,param:"nol_applyViewInc",val:"1"}),(!R({data:e,param:"nol_minutes"})||"daypart"!==R({data:e,param:"nol_cadence"})&&"dcrstatic"!==R({data:e,param:"nol_product"})||"dcrstatic"===R({data:e,param:"nol_product"})&&"stream"===R({data:e,param:"nol_cadence"}))&&(O(e),
R({data:e,param:"nol_pingCount",val:0}));var p=R({data:e,param:"nol_adLoadType",vidType:"content"});""!==p&&void 0!==p&&null!==p&&A(e,Ee.onAdLoadFlag),q(e),n&&n.resetViewability&&n.resetViewability()}function W(a,r){var i=r.id||r.getId?r.getId():"0",o=fe[i].nol_tagMap.nol_url,s,l,d,u=0,p=o?o[a.nol_url]||a.nol_url||"":a.nol_url||"",m={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},v={ad:{},content:{},static:{},count:{content:0,static:0}},f={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:e.location.href,nol_sendTime:"0",nol_pageURL:e.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:e.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_random:Math.round(1e9*Math.random()),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0",nol_viVersion:"",nol_omidsdkVersion:""},g=a;g.nol_playerId=i;var _=this,y={_dataArrObj:v,_settings:g,_currVidType:"ad",_currAssetid:"0",serviceFlag:m};Ne.extendfData(y),this.resetViewability=function(){_&&_.viewability&&_.viewability.initialized&&_.viewability.initialized()&&_.viewability.clear(y),_&&_.audibility&&_.audibility.initialized&&_.audibility.initialized()&&_.audibility.clear(y)},this.startViewability=function(e){_&&_.viewability&&_.viewability.initialized&&_.viewability.initialized()&&"function"==typeof _.viewability.start&&_.viewability.start(e)},this.stopViewability=function(){_&&_.viewability&&_.viewability.initialized&&_.viewability.initialized()&&"function"==typeof _.viewability.stop&&_.viewability.stop()},t._listeners.addListener("tick",function(){if(r.pauseObj.eventPauseTime>=r.pauseObj.cmsPauseTime&&Ne.state.status.current(y)!==Ne.states.stopped&&Ne.state.status.current(y)!==Ne.states.paused&&Fe.isEnabled(y)){var e={event:xe.events.pause,curPos:Ne.state.position.current(y),prevPos:null,timestamp:Ne.state.timeStamp.current(y)};Ne.state.set(y,e),Fe.preProcess(y,e),r.pauseObj.eventPauseTime=0}r.pauseObj.pauseTime>r.pauseObj.maxPauseTime&&"dcrstatic"!==R({data:y,param:"nol_product"})&&"vrivideo"!==R({data:y,param:"nol_product"})&&(r.pauseObj.pauseTime=0,t._listeners.fireEvent("handleSessionReset",{plid:i,passedFdata:y}),t._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),K({data:y},_);for(d in f)a.hasOwnProperty(d)?g[d]=a[d]:g[d]=fe[i][d]||f[d];if(g.nol_customExtension&&p){for(s=0,l=g.nol_customExtension.length;s<l;s+=1)p=p.replace("|!["+g.nol_customExtension[s]+"]!|",fe[i][g.nol_customExtension[s]]||"");g.nol_url=p}if("true"!==R({data:y,param:"nol_fireStop"})&&-1==="interval,episode,streamduration".indexOf(R({data:y,param:"nol_cadence"}))||n("pagehide||beforeunload",function(t){Se&&(e.clearInterval(Se),Se=0,c({serverTimeOffset:R({data:y,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:R({data:y,param:"nol_rfrmsk"}),method:Ne.getRequestMethod(y)})),"sendBeacon"in navigator&&(Ae=!0),R({data:y,param:"nol_forceFireOnClose_content",val:"1"}),Ee.onEndDetected&&A(y,Ee.onEndDetected),Fe.setNextTick(y,null,"content"),F(y)}),this.eventListener=function(e){e.tag=_,j(y,e)},fe[i].eventQueue.length>u)for(s=0;s<fe[i].eventQueue.length;s+=1)fe[i]&&fe[i].eventQueue&&(fe[i].eventQueue[s].timeStamp="queued"+s),j(y,fe[i].eventQueue[s]),u=s;t.PLVBL&&y.get("nol_vizuURL")&&("interval"===y.get("nol_cadence")||"streamduration"===y.get("nol_cadence"))&&(this.viewability=new t.PLVBL(y,r))}function H(a){a&&a.hasOwnProperty("configReq")&&a.hasOwnProperty("player")&&a.configReq.length>0&&void 0!==a.player?(s(a.configReq),e.clearInterval(a.player.lsPopulatedInterval),a.player.lsPopulatedInterval=0):t._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}function X(e,t){if(e&&t)for(var a=e.match(pe.regex),n="",r=0;r<a.length;r++)(n=a[r].match(/\w+/gi))&&n.length>0&&(e=e.replace(a[r],t[n[0]]||""));return e}function Y(e,t){return t?(t._dataArrObj||(t={_dataArrObj:{content:{0:t}},_settings:t,_currVidType:"content"}),Ne.extendfData(t),f(t,e,null,{vidType:"content",silent:!0,noClone:!0})):e}var $=t.PLDPR=t.PLDPR||{},Z=e.NOLBUNDLE,ee=Z.sdkvForConfig?Z.sdkvForConfig():"bj.6.0.0",te="6.0.0",ae="30",ne=t.getBaseBuildVer?t.getBaseBuildVer()+"30":"6.0.030",re="cgi-bin/",ie=Z.getConfigAddress?Z.getConfigAddress():Z.getAddress(),oe="cfg",se="error",le=t.getLS(),de=t.getConfigVer?t.getConfigVer():300,ce=5,ue={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},pe={regex:/\|\![\w\W]*?(\!\|)/g,length:2},me=/[\[\{<\(\}\]>\)]/g,ve=new RegExp(/(.*?)(_content|_ad|_static)?$/i),fe=$.dataObj||{},ge=0,_e=0,ye=5,he=5,Pe=[],Se,Te=2,be=!1,Oe=[],Le="false",we=Le,Ce,ke={},Ee={},Ie={},De=!1,Ae=!1,Me,Re={send:function(e,n,r){var i=e,o=-1!==i.url.indexOf("&c62=")?a(i.url,"c62=")+"&c62=sendTime,"+(void 0!==n?n:Be()/1e3>>0):i.url,s=this,l=a(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random());if(r=r||"GET",t.postMsgAvail&&i.hasOwnProperty("maskRefUrl")&&-1!==i.maskRefUrl&&"true"===i.maskRefUrl)Ge.sendMaskedPing(l);else if("POST"===r){var d=o.indexOf("?"),c=o.substr(0,d),u=o.substr(d+1);Ge.request(c,{method:"POST",data:u},!Ae).then(function(e){parseInt(e.status)>400&&s.onError({target:{src:o}},i)})}else if(Ae)navigator.sendBeacon(l);else{var p=new Image;p.onerror=function(e){s.onError(e,i)},p.src=l}},setup:function(e){var t=this,a=e.hasOwnProperty("url")?e.url:"",n=e.params||{url:a,errorDelay:1e3*(e.delay||he),retry:0,maskRefUrl:e.hasOwnProperty("maskRefUrl")&&String(e.maskRefUrl).length>0?e.maskRefUrl:-1};a&&a.length>0&&t.send(n,e.pingSendTime,e.method)},onError:function(t,a){var n=this,r=t.target.src;a&&a.retry<ye&&r&&r.length>0&&(a.retry+=1,a.url=r,e.setTimeout(function(){n.send(a,null,method)},a.errorDelay))}},Be=Z.getTIme||function(){return(new Date).getTime()},Ve={},Fe=function(){var e="nol_eventData",t="nol_eventDataDelimiter",a="nol_eventDataEvents",n="nol_eventDataEnabled",r=":",i={delimiter:"",eventsList:[]},o=function(){return{play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}}}(),s={get:function(t,a){var n="";return t&&(n=R({data:t,param:e,vidType:a||t._currVidType})),n},set:function(t,a,n){return t&&R({data:t,param:e,val:a,vidType:n||t._currVidType}),t},clear:function(t){t&&(R({data:t,param:e,val:"",vidType:"ad"}),R({data:t,param:e,val:"",vidType:"content"}))},clone:function(e){try{return{content:s.get(e,"content"),ad:s.get(e,"ad")}}catch(e){return null}},bind:function(e,t){try{if(e&&t)for(var a in t)s.set(e,t[a],a)}catch(e){}},append:function(e,t){if(e&&t){var a=s.get(e),n=s.delimiter(e),r=s.parseEventData(t);s.set(e,a?[a,r].join(n):r)}},delimiter:function(e){return e?(i.delimiter||(i.delimiter=R({data:e,param:t})),i.delimiter):""},isEnabled:function(e){return!!e&&"true"===R({data:e,param:n})},isEventEnabled:function(e,t){if(t&&e){var a=s.lookupEvent(e.toLowerCase());if(a)return s.eventsList(t).indexOf(a.name)>-1}return!1},eventsList:function(e){if(e){if(!i.eventsList||0==i.eventsList.length){var t=R({data:e,param:a});t&&(i.eventsList=t.split(","))}return i.eventsList}},clearCache:function(){i.delimiter="",i.eventsList=[]},lookupEvent:function(e){return e?o[e.toLowerCase()]:null},parseEventData:function(e){var t="";if(e){var a=s.lookupEvent(e.event);if(a){var n=[a.abbrv,e.timestamp,e.curPos];void 0!==e.prevPos&&null!==e.prevPos&&e.curPos!=e.prevPos&&n.push(e.prevPos),void 0!==e.p1&&null!==e.p1&&n.push(e.p1),t=n.join(":")}}return t},handleEvent:function(e,t){e&&t&&s.isEventEnabled(t.event,e)&&s.append(e,t)},setNextTick:function(e,t,a){var n=s.get(e,a);if(n&&n.indexOf("{{nextTick}}")>-1)if(t&&t.event===xe.events.playhead)e=s.set(e,n.replace(/{{nextTick}}/gi,1==t.curPos?"0":t.curPos),a);else{var r=Ne.state.position.current(e,a)||"0";e=s.set(e,n.replace(/{{nextTick}}/gi,r),a)}return e},preProcess:function(e,t){try{e&&t&&t.event&&t.event!==xe.events.play&&-1===t.event.indexOf("event_")&&(s.setNextTick(e,t),t.event===xe.events.stop&&"content"!==Ne.type.current(e)&&s.setNextTick(e,t,"content"),s.handleEvent(e,t))}catch(e){}},postProcess:function(e,t){try{e&&t&&t.event&&t.event===xe.events.play&&s.handleEvent(e,t)}catch(e){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),Ne={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",assetId:"nol_assetid"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return t._players[e];var a=R({data:e,param:"nol_playerId"});return Ne.findPlayer(a)}return null},currentPosition:function(e){return r(R({data:e,param:Ne._keys.currentPosition}),"num")},currentTimestamp:function(e){return r(R({data:e,param:Ne._keys.currentTimestamp}),"num")},asset:{current:function(e){return e?e._currAssetid:null},parse:function(e,t){var a=ke[e.get("nol_playerId")]&&ke[e.get("nol_playerId")].nol_assetid?ke[e.get("nol_playerId")].nol_assetid.clientField:"nol_assetid";return t?t[a]:null}},type:{isCurrentlyContent:function(e){return"content"===e._currVidType},isCurrentlyAd:function(e){return"ad"===e._currVidType},isCurrentlyStatic:function(e){return"static"===e._currVidType},current:function(e){return e._currVidType},parse:function(e,t){var a=ke[e.get("nol_playerId")]||{},n=a.nol_vidtype?a.nol_vidtype.clientField:"nol_vidtype",r=t[n]?t[n].toString().toLowerCase():"",i=","+R({data:e,param:"nol_contentType"});return r&&-1!==i.indexOf(","+r)?"content":"dcrstatic"===R({data:e,param:"nol_product"})?"static":"ad"}},tagName:function(e,t){return R({data:e,param:Ne._keys.tagName,vidType:t||e._currVidType})},localTimer:function(e,t){return R({data:e,param:Ne._keys.localTimer,vidType:t||e._currVidType})||"nol_fdoffset"},isInitialized:function(e,t){try{return t=t||e._currVidType,"{}"!==JSON.stringify(e._dataArrObj[t])}catch(e){return!1}},updateMetadata:function(e,a,n){try{var r={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]},n=ke[e.get("nol_playerId")]||{},i=function(e){var t=!0;for(var a in r.nolParams)if(n&&n.hasOwnProperty(r.nolParams[a])&&e===n[r.nolParams[a]].clientField){t=!1;break}return t};if(!e||!a)return;var o=void 0!==n&&"object"==typeof n&&n;for(var s in a)a.hasOwnProperty(s)&&(o&&i(s)?R({data:e,param:String(s),val:String(a[s])}):t._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+s+" is not allowed. Please remove "+s+" from your metadata parameter."}))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},extendfData:function(e){"function"!=typeof e.get&&(e.isProductOf=function(e){return!!e&&("object"==typeof e?e.indexOf(R({data:this,param:"nol_product"}))>-1:R({data:this,param:"nol_product"})===e)},e.get=function(e,t){return R({data:this,param:e,vidType:t})},e.set=function(e,t){return R({data:this,param:e,val:t})},e.del=function(e,t){e&&t&&this&&this._dataArrObj&&this._dataArrObj[t]&&delete this._dataArrObj[t][e]})},state:{position:{current:function(e,t){return r(R({data:e,param:Ne._keys.stateCurrentPosition,vidType:t||e._currVidType}),"num")},previous:function(e,t){return r(R({data:e,param:Ne._keys.statePreviousPosition,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=Ne.state.position.current(e);R({data:e,param:Ne._keys.statePreviousPosition,val:n,vidType:a||e._currVidType}),R({data:e,param:Ne._keys.stateCurrentPosition,val:t,vidType:a||e._currVidType})}},timeStamp:{current:function(e,t){return r(R({data:e,param:Ne._keys.stateCurrentTimestamp,vidType:t||e._currVidType}),"num")},previous:function(e,t){return r(R({data:e,param:Ne._keys.statePreviousTimestamp,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=Ne.state.timeStamp.current(e);R({data:e,param:Ne._keys.statePreviousTimestamp,val:n,vidType:a||e._currVidType}),R({data:e,param:Ne._keys.stateCurrentTimestamp,val:t,vidType:a||e._currVidType})}},asset:{current:function(e,t){return R({data:e,param:Ne._keys.stateCurrentAsset,vidType:t||e._currVidType})},previous:function(e,t){return R({data:e,param:Ne._keys.statePreviousAsset,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ne.state.asset.current(e);R({data:e,param:Ne._keys.statePreviousAsset,val:n,vidType:a||e._currVidType}),R({data:e,param:Ne._keys.stateCurrentAsset,val:t,vidType:a||e._currVidType})}},status:{current:function(e,t){return R({data:e,param:Ne._keys.stateCurrentStatus,vidType:t||e._currVidType})},previous:function(e,t){return R({data:e,param:Ne._keys.statePreviousStatus,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ne.state.status.current(e,a);R({data:e,param:Ne._keys.statePreviousStatus,val:n,vidType:a||e._currVidType}),R({data:e,param:Ne._keys.stateCurrentStatus,val:t,vidType:a||e._currVidType})}},type:{current:function(e,t){return R({data:e,param:Ne._keys.stateCurrentType,vidType:t||e._currVidType})},previous:function(e,t){return R({data:e,param:Ne._keys.statePreviousType,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ne.state.type.current(e,a);R({data:e,param:Ne._keys.statePreviousType,val:n,vidType:a||e._currVidType}),R({data:e,param:Ne._keys.stateCurrentType,val:t,vidType:a||e._currVidType})}},set:function(e,t){var a=Ne.findPlayer(e);switch(t.event){case"LOAD":Ne.state.asset.set(e,t.assetId),Ne.state.type.set(e,t.contentType),Ne.state.timeStamp.set(e,t.timestamp);break;case"PLAY":case"RESUME":Ne.state.status.set(e,Ne.states.playing),Ne.state.asset.set(e,t.assetId),Ne.state.type.set(e,t.contentType),Ne.state.timeStamp.set(e,t.timestamp),"PLAY"===t.event&&Ne.state.position.set(e,0),"RESUME"===t.event&&void 0!=t.currentPos&&null!=t.currentPos&&"{{nextTick}}"!=t.currentPos&&(Ne.state.position.set(e,t.curPos),Ne.state.timeStamp.set(e,t.timestamp)),a.pauseObj.eventPauseTime=0;break;case"PAUSE":Ne.state.status.set(e,Ne.states.paused);break;case"STOP":Ne.state.resetAsset(e),Ne.state.status.set(e,Ne.states.stopped);break;case"PLAYHEAD":Ne.state.position.set(e,t.curPos),Ne.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Ne.state.position.set(e,t.curPos),Ne.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":a.pauseObj.eventPauseTime=0}},get:function(e,t){try{if(e){return{position:{current:Ne.state.position.current(e,t),previous:Ne.state.position.previous(e,t)},timeStamp:{current:Ne.state.timeStamp.current(e,t),previous:Ne.state.timeStamp.previous(e,t)},asset:{current:Ne.state.asset.current(e,t),previous:Ne.state.asset.previous(e,t)},status:{current:Ne.state.status.current(e,t),previous:Ne.state.status.previous(e,t)},type:{current:Ne.state.type.current(e,t),previous:Ne.state.type.previous(e,t)}}}}catch(e){}return null},resetAsset:function(e){Ne.state.position.set(e,null),Ne.state.timeStamp.set(e,null),Ne.state.asset.set(e,null)},bind:function(e,t){try{if(e&&t)for(var a in t)R({data:e,param:Ne._keys.statePreviousPosition,val:t[a].position?t[a].position.previous:null,vidType:a}),R({data:e,param:Ne._keys.stateCurrentPosition,val:t[a].position?t[a].position.current:null,vidType:a}),R({data:e,param:Ne._keys.statePreviousTimestamp,val:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),R({data:e,param:Ne._keys.stateCurrentTimestamp,val:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),R({data:e,param:Ne._keys.statePreviousAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),R({data:e,param:Ne._keys.stateCurrentAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),R({data:e,param:Ne._keys.statePreviousStatus,val:t[a].status?t[a].status.current:null,vidType:a}),R({data:e,param:Ne._keys.stateCurrentStatus,val:t[a].status?t[a].status.current:null,vidType:a}),R({data:e,param:Ne._keys.statePreviousType,val:t[a].type?t[a].type.current:null,vidType:a}),R({data:e,param:Ne._keys.stateCurrentType,val:t[a].type?t[a].type.current:null,vidType:a})}catch(e){}},clone:function(e){try{return{content:Ne.state.get(e,"content"),ad:Ne.state.get(e,"ad")}}catch(e){}}},cms:{parse:function(e,t,a){var n={metadata:(a?a.metadata:null)||{},defaultKey:(a?a.defaultKey:"")||"",silent:(a?a.silent:null)||!1,noClone:(a?a.noClone:null)||!1,vidType:a?a.vidType:"",noEncode:!(!a||!0!==a.noEncode)},r=e&&e.clientField?e.clientField:n.defaultKey;if(r&&t){if(n.metadata&&n.metadata.hasOwnProperty(r)&&n.metadata[r])return n.metadata[r];if(e&&e.clientField){if(n.end)return t.get(e.clientField,a?a.vidType:"");var i=t;!0!==n.noClone&&(i=JSON.parse(JSON.stringify(t)),J(i,"loadmetadata",n.metadata));var o=[];return!0===n.noEncode?o=[r]:(o=(e.encoding||"").split(""),o.splice(o.length/2,0,r)),n.end=!0,f(i,"|!"+o.join("")+"!|",null,n)}}return""}},getRequestMethod:function(e){return e&&e.hasOwnProperty("get")&&"function"==typeof e.get?e.get("nol_prefRequestMethod")||e.get("nol_requestMethod"):"GET"},mtvr:{isTransPing:function(e){return!!e&&"id3"===R({data:e,param:"nol_product"})},isPCTag:function(e){return!!e&&(e.isProductOf("mtvr")&&R({data:e,param:"nol_subTag"}))},pcChanged:function(e,t){return!!e&&(t!==R({data:e,param:"nol_cidNull"})&&t!==R({data:e,param:"nol_pccid"}))},isFDTag:function(e){return!!e&&(e.isProductOf("mtvr")&&!R({data:e,param:"nol_subTag"}))},fdChanged:function(e,t){return!!e&&(t!==R({data:e,param:"nol_cidNull"})&&t!==R({data:e,param:"nol_fdcid"}))},resetTagSession:function(e,a){e&&e.set("nol_sessionId",a||t.generateGUID(),"content")},clearTagSession:function(e){if(e)return e.del("nol_sessionId","content")}}},xe=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},a={checkRewind:function(e,t){if(e&&void 0!==t&&null!==t&&"stream"!==R({data:e,param:"nol_cadence"})&&"impression"!==R({data:e,param:"nol_cadence"})){var a=Math.floor(r(t,"num")),n=Ne.state.position.current(e);return{match:a-n<0,currentPos:a,previousPos:n}}return!1},checkForward:function(e,t){if(e&&void 0!==t&&null!==t&&"stream"!==R({data:e,param:"nol_cadence"})&&"impression"!==R({data:e,param:"nol_cadence"})){var a=Math.floor(r(t,"num")),n=Ne.state.position.current(e),i=Ne.state.timeStamp.current(e),o=r(R({data:e,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil(Be()/1e3-i)||1;if(0==n&&a>86400&&"nol_cmsoffset"===Ne.localTimer(e)){var l=Math.round(Be()/1e3).toString().substr(0,t.toString().length);l&&(n=parseInt(l))}var d=a-n;return{match:d>o&&d>Math.ceil(1.5*s),currentPos:a,previousPos:n}}return!1}},n={checkRewind:function(e,t){var a=Ne.currentPosition(e),n=Ne.currentTimestamp(e),i=r(R({data:e,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(e,t){var a=Ne.currentPosition(e),n=Ne.currentTimestamp(e),i=r(R({data:e,param:"nol_id3IntrvlGp"}),"num");return!1}};return{events:e,inferEvent:{inferEvent:function(n,i,o,s,l){var d=null;try{if(d={event:"event_"+n,curPos:Ne.state.position.current(i),prevPos:null,timestamp:s},n&&i)switch(n.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var c=Ne.asset.parse(i,l),u=Ne.state.asset.current(i),p=Ne.state.asset.previous(i),m=Ne.state.type.current(i),v=Ne.type.parse(i,l);if(d.event=e.load,d.assetId=c,d.contentType=v,Ne.state.status.current(i,v)==Ne.states.paused&&(u==c&&null!==c||m!==v)){d.event=e.resume,d.assetId=c,d.contentType=v,d.curPos="{{nextTick}}";break}if(Ne.state.status.current(i,v)!==Ne.states.playing&&u!=c||Ne.state.status.current(i,v)===Ne.states.stopped&&p==c&&null!==c||null===u){d.event=e.play,d.curPos="{{nextTick}}";break}break;case"5":case"play":d.event="event_play";break;case"7":case"stop":d.event="event_stop";break;case"57":case"end":case"oncomplete":d.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(o>-1){var f=a.checkRewind(i,o);if(f.match){d.event=e.rewind,d.curPos=f.currentPos,d.prevPos=f.previousPos,d.p1=d.prevPos-d.curPos;break}if(-1===Fe.get(i).indexOf("{{nextTick}}")){var g=a.checkForward(i,o);if(g.match){d.event=e.forward,d.curPos=g.currentPos,d.prevPos=g.previousPos,d.p1=d.curPos-d.prevPos;break}}if(Ne.state.status.current(i)===Ne.states.paused){d.event=e.resume,d.assetId=Ne.state.asset.current(i),d.contentType=Ne.type.current(i),d.curPos=o;break}d.event=e.playhead,d.curPos=o}break;case"55":var _=R({data:i,param:R({data:i,param:"nol_timer"})})||R({data:i,param:"nol_fdoffset"});"daypart"===R({data:i,param:"nol_cadence"})&&(_=r(_,"num"),_+="nol_pcoffset"==R({data:i,param:"nol_timer"})?r(R({data:i,param:"nol_pcTimeCode"}),"num"):r(R({data:i,param:"nol_fdTimeCode"}),"num")),d.event=e.playhead;break;case"9":case"mute":d.event=e.mute,d.p1=o}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+n})}return d}}.inferEvent}}(),Ge=function(t,a,n){var r={sendMaskedPing:function(e,i){t.lsReady()?a.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:e}}),a.src):(i=i||0)<n.maxRetry&&setTimeout(function(){r.sendMaskedPing(e,i+1)},300)},request:function(t,a,n){return e.NOLBUNDLE.controllers.util.Promise(function(e,r){a=a||{},a.method=a.method||"GET",a.data=a.data||"";var i=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");i.open(a.method,t,void 0===n||null===n||n),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState>3&&e&&e(i)},i.send(a.data)})}};return{sendMaskedPing:r.sendMaskedPing,request:r.request}}(t,le,{maxRetry:ye});return $.initFromConfig=function(a,n,r){t._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(a&&a.nol_GLOBALS){var i,s,l=Be(),d,u,p,m,v="localhost",f=a.nol_GLOBALS.debugSfcode||"uat-cert",g=a.nol_GLOBALS.nol_appid||"",_=a.nol_GLOBALS.nol_lsid||"",y=a.nol_GLOBALS.nol_emmURL||(a.nol_GLOBALS.nol_tagMap&&a.nol_GLOBALS.nol_tagMap.nol_defaults?a.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",h,P,S,T,b,O,L,w;if(r&&(t.optoutCookie&&"TOTAL"===t.optoutCookie&&"OPTOUT"!==t.localStorageId&&(_="OPTOUT",t._listeners.fireEvent("debug",{type:"debug",msg:'Optout cookie was set but lsid was "'+t.localStorageId+'". Setting lsid to OPTOUT'})),""===_&&("-1"===t.localStorageId?_="999":""===t.localStorageId?_=t.generateGUID():t.localStorageId&&(_=t.localStorageId))),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+t.localStorageId+"; config lsid: "+_}),t._listeners.fireEvent("sendOptOutStatus","OPTOUT"==_),void 0!==a.nol_GLOBALS.nol_maxRetry&&null!==a.nol_GLOBALS.nol_maxRetry&&""!==a.nol_GLOBALS.nol_maxRetry){var C=parseInt(a.nol_GLOBALS.nol_maxRetry);C>-1&&(ye=C)}if(a&&a.hasOwnProperty("nol_GLOBALS")){var k=n||a.nol_GLOBALS.nol_playerId||0;if(!(s=t._players[k]))return;v=a.nol_GLOBALS.nol_sfcode||v,t._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+s.name+'" initialized with globals '+JSON.stringify(s.getConfigParams().ggParams)}),s.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(a.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(a.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},r&&(a.nol_GLOBALS.nol_serverTime=Be()/1e3>>0),w=t.localStorage?fe[k]?fe[k].nol_serverTime||t.localStorage.getItem("nol_serverTime"):t.localStorage.getItem("nol_serverTime")||0:fe[k]?fe[k].nol_serverTime:0,w===a.nol_GLOBALS.nol_serverTime?ge=fe[k]?fe[k].nolPriv_serverTimeOffset:a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3):(ge=a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3),t.localStorage&&t.localStorage.setItem("nol_serverTime",a.nol_GLOBALS.nol_serverTime)),he=a.nol_GLOBALS.nol_errorWait||he,i=s.getConfigParams().ggParams||{},fe[k]=o(fe[k]),fe[k].nolPriv_serverTimeOffset=ge,fe&&fe.hasOwnProperty(k)?fe[k].nol_nielsenAdSupportFlg=0:t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),Se&&(e.clearInterval(Se),Se=0),a.nol_GLOBALS.nol_sendTimer&&(Se=e.setInterval(function(){c({serverTimeOffset:fe[k].nolPriv_serverTimeOffset,url:"__sendIt",method:fe[k].nol_requestMethod})},1e3*a.nol_GLOBALS.nol_sendTimer));for(d in i)i.hasOwnProperty(d)&&(fe[k][d]=i[d]);for(d in a.nol_GLOBALS)a.nol_GLOBALS.hasOwnProperty(d)&&(fe[k][d]=a.nol_GLOBALS[d]);Ee=fe[k].nol_eventFilter||{},Ie=fe[k].nol_serviceFilter||{},Me=fe[k].nol_id3Map||{},ke[k]=ke[k]||{};for(d in fe[k].nol_clientCMSmap)fe[k].nol_clientCMSmap.hasOwnProperty(d)&&(P=fe[k].nol_clientCMSmap[d].toString()||"",S=P.replace(me,""),b=P.match(me)||[],T={clientField:S.toString(),encoding:b.join("")},ke[k][d]=T);if(i&&i.hasOwnProperty("nol_override")&&Object.keys(i.nol_override).length>0)for(d in i.nol_override)i.nol_override[d].length>0&&(fe[k][d]=i.nol_override[d]);a.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&Z.hasOwnProperty("setTotalNumAssetsAllowed")&&Z.setTotalNumAssetsAllowed(a.nol_GLOBALS.nol_maxStaticInstances),s.configLoaded=!0,r&&(fe[k].nol_prefProtocol=t.userAgent.isIOS()&&t.userAgent.iosVersion().major>=9?"https":0===ie.indexOf("https")?"https":"http",fe[k].nol_playerId=k,fe[k].nol_nuid=_,fe[k].nol_lsid=_,fe[k].nol_bldv=ne,fe[k].nol_sdkv=s.sdkvForConfig,fe[k].nol_assetName=a.nol_GLOBALS.hasOwnProperty("nol_assetName")&&a.nol_GLOBALS.nol_assetName.length>0?a.nol_GLOBALS.nol_assetName:"defChnAsset",fe[k].nol_sfcode=i.sfcode,fe[k].nol_dcrsfcode=i.sfcode,fe[k].nol_apn=i.apn||(a.nol_GLOBALS.hasOwnProperty("nol_apn")&&a.nol_GLOBALS.nol_apn.length>0?a.nol_GLOBALS.nol_apn:""),fe[k].nol_nmspc="NOLBUNDLE"),fe[k].nol_lstrg="",fe[k].nol_userSessionId=s.sessionId,fe[k].nol_useroptout="",t.userAgent.isAndroid()?fe[k].nol_vriDeviceTypeId="0003":t.userAgent.isIOS()?fe[k].nol_vriDeviceTypeId="0002":fe[k].nol_vriDeviceTypeId="0001",_&&"999"!==_&&!t.userAgent.isFB()&&(fe[k].nol_lstrg="lstrg-"+_),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+t.EMMURL+"; config emm: "+y}),y=X(y,fe[k]),fe[k].nol_emmURL=y,t.setLsId(_,y,s.sessionId)}if(a&&a.hasOwnProperty("nol_TAGS"))for(fe[k].tagSize=a.nol_TAGS.length,fe[k].tags=[],t._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),d=0;d<fe[k].tagSize;d+=1)t._listeners.fireEvent("debug",{type:"debug",msg:String(a.nol_TAGS[d].nol_comment)}),fe[k].tags.push(new W(JSON.parse(JSON.stringify(a.nol_TAGS[d])),s));void 0!==t.enablePlayer&&t.enablePlayer(k,"PLDPR"),fe[k].bReInit=!1,i.nol_hybridCfg&&e&&e.JSON&&(h=e.document.createElement("script"),h.text="(function() {if (typeof "+i.nol_hybridCfg+" === 'function'){"+i.nol_hybridCfg+"('"+JSON.stringify(a)+"')}}())",e.document.head?(e.document.head.appendChild(h),e.document.head.removeChild(h)):(e.document.getElementsByTagName("head")[0].appendChild(h),e.document.getElementsByTagName("head")[0].removeChild(h))),fe[k].forceStreamRegen=!1,t._listeners.addListener("tick",function(){s&&s.hasOwnProperty("pauseObj")&&s.pauseObj.hasOwnProperty("pauseTime")&&(s.pauseObj.pauseTime+=1,s.pauseObj.eventPauseTime+=1)}),s&&s.configLoaded&&e.NOLBUNDLE&&e.NOLBUNDLE.controllers&&e.NOLBUNDLE.controllers.util&&e.NOLBUNDLE.controllers.util.fireCustomEvent&&e.NOLBUNDLE.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:s.name,instance:s}),t._listeners.fireEvent("flushQueue")}else e.console&&e.console.warn&&e.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),t._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."});return fe[k]}catch(a){e.console&&e.console.error&&e.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct. "+a.message),t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response. "+a.message})}},$.getCmsMap=function(e){try{if(void 0!==e&&"string"==typeof e||t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),fe&&fe.hasOwnProperty(e)&&void 0!==fe[e].nol_clientCMSmap)return fe[e].nol_clientCMSmap}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},$.resolveExpression=Y,$.init=function(a){var n=a.getConfigParams()||{},r,i,o=t.getIfLsidShouldSend()?t.getLsId():void 0,s,l="",c=0===ie.indexOf("https")?"https":"http";s={pli:{val:n.nol_playerId||0,protect:!0},nmspc:{val:"NOLBUNDLE",protect:!0},sdkv:{val:ee,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:de,protect:!0},bldv:{val:ne,protect:!0},prefprotocol:{val:c,protect:!1}},a.addListener("ggPM",function(e){E(e)}),a.lsPopulatedInterval=0,a.lsCurrentRetry=0,a.serviceSending={tsv:!1,stn:!1},a.ottStatusObj={},a.oServiceCall={},a.static={started:!1};for(r in n.ggParams)!n.ggParams.hasOwnProperty(r)||s[r]&&s[r].protect||0==r.indexOf("nol_")||(s[r]={val:d(n.ggParams[r])});for(r in s)s.hasOwnProperty(r)&&(l+=r+"="+s[r].val+"&");l=l.substr(0,l.length-1),i=ie.replace(/[\w\W]*?:\/\//g,""),a.useCachedConfig||(void 0===o||a.lsPopulatedInterval?void 0===o&&(Ce=c+"://"+i+re+"cfg?"+l+"&sendTime="+Math.floor(Be()/1e3),H({configReq:Ce,player:a})):a.lsPopulatedInterval=e.setInterval(function(){o=t.getLsId(),"-1"!==o?(Ce=c+"://"+i+re+"cfg?"+l+"&lsid="+o+"&sendTime="+Math.floor(Be()/1e3),H({configReq:Ce,player:a})):2===a.lsCurrentRetry?(Ce=c+"://"+i+re+"cfg?"+l+"&lsid=999&sendTime="+Math.floor(Be()/1e3),H({configReq:Ce,player:a})):a.lsCurrentRetry+=1},1e3))},$.built||($.built=!0,$.BUILDVERSION=ne,$.dataObj=fe,t.bindPlayers($,"PLDPR"),t._listeners.fireEvent("flushQueue")),$}),e.NOLBUNDLE.registerLib("PLDCR",function(t){"use strict";function a(t,a){var n={};return n.set=function(e,t){return n.init=!0,n.elapsed=0,n.startTimeStamp=0,"function"==typeof e&&(n.funcCall=e),isNaN(t)||(n.intervalTime=t),n},n.play=function(e){return n.isActive||(e?(n.startTimeStamp=0,n.elapsed=0,n.setTimer()):n.setTimer(n.remaining),n.isActive=!0),n},n.pause=function(){return n.isActive&&(n.isActive=!1,n.remaining-=Date.now()-n.last,n.clearTimer()),n},n.stop=function(){return n.isActive=!1,n.remaining=n.intervalTime,n.clearTimer(),n},n.clearTimer=function(){e.clearTimeout(n.timeoutObject)},n.setTimer=function(t){var a=n;"function"==typeof n.funcCall&&(isNaN(t)&&(t=n.intervalTime),n.remaining=t,n.last=Date.now(),n.clearTimer(),n.timeoutObject=e.setTimeout(function(){a.tick()},t))},n.tick=function(){n.isActive&&(n.elapsed++,n.funcCall(),n.setTimer())},n.reset=function(){n.startTimeStamp=0,
n.elapsed=0,n.remaining=n.intervalTime},n.init?n:(n.set(t,a),n)}function n(){l.dcrTimer&&(l.latestDcrTickVal=l.dcrTimer.elapsed,t._listeners.fireEvent("dcrHeartbeat",l.dcrTimer.elapsed))}function r(e){t.globalHasFocus&&!t.globalHasFocus()&&(t._listeners.fireEvent("info",{type:"info",msg:"Page onBlur fired and stopped static timer: "+JSON.stringify(e,function(e,t){if("string"==typeof t)return t})}),l.dcrTimer&&l.dcrTimer.pause())}function i(e){t._listeners.fireEvent("info",{type:"info",msg:"Page onFocus fired and playing static timer: "+JSON.stringify(e,function(e,t){if("string"==typeof t)return t})}),l.dcrTimer&&l.dcrTimer.play(l._reset),l._reset=!1}function o(e){!document.hidden&&t.globalHasFocus&&t.globalHasFocus()?(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - VISIBLE"}),l.dcrTimer&&l.dcrTimer.play(l._reset),l._reset=!1):(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - HIDDEN"}),l.dcrTimer&&l.dcrTimer.pause())}function s(e){l.dcrTimer&&l.dcrTimer.stop()}var l=t.PLDCR=t.PLDCR||{dcrTimer:void 0,startDcrTime:0,latestDcrTickVal:0,_reset:!1},d="6.0.0",c="1",u=e.NOLBUNDLE,p=t.getBaseBuildVer?t.getBaseBuildVer()+"1":"6.0.01";return l.startDcrTick=function(){},l.latestDcrTick=function(){return l.latestDcrTickVal},l.start=function(e){var r=!t.globalHasFocus||t.globalHasFocus();l._reset=e,(null===l.dcrTimer||void 0===l.dcrTimer||e)&&(r?(l.dcrTimer=a(n,1e3).play(!0),l._reset=!1):l.dcrTimer=a(n,1e3))},l.stop=function(){l.dcrTimer&&l.dcrTimer.stop()},l.init=function(t){u.browserSafeAddEventListener({element:e,eventType:"blur",func:r,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"focus",func:i,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"beforeunload",func:s,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"pagehide",func:s,useCapture:!1}),document.addEventListener&&document.addEventListener("visibilitychange",o)},l.built||(l.built=!0,l.BUILDVERSION=p,t.bindPlayers(l,"PLDCR")),l}),e.NOLBUNDLE.registerLib("PLLOG",function(t){"use strict";function a(e){if(e){var a=String(e).toUpperCase();if(v.hasOwnProperty(a))for(var n in v[a]){var r=String(n).toLowerCase();t._listeners.addListener(r,v[a][r])}}}function n(e){return e&&e.target&&e.target.hasOwnProperty("msg")?e.target.msg:""}function r(t){e.console&&console.info("Nielsen Log: Info - ",n(t))}function i(t){e.console&&console.log("Nielsen Log: Debug - ",n(t))}function o(t){e.console&&console.log("Nielsen Log: Logger - ",n(t))}function s(t){e.console&&console.warn("Nielsen Log: Warn - ",n(t))}function l(t){e.console&&console.error("Nielsen Log: Error - ",n(t))}var d=t.PLLOG=t.PLLOG||{},c=e.NOLBUNDLE,u="6.0.0",p="0",m=t.getBaseBuildVer?t.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer,v={INFO:{info:r},DEBUG:{info:r,debug:i,warn:s,error:l},WARN:{info:r,warn:s},ERROR:{info:r,error:l},CONSOLE:{info:r},TRUE:{info:r},LOGGER:{logger:o}};return d.init=function(e){if(e&&e.getConfigParams){var t=e.getConfigParams();t.hasOwnProperty("ggParams")&&t.ggParams.hasOwnProperty("nol_sdkDebug")&&a(t.ggParams.nol_sdkDebug)}},d.built||(d.built=!0,d.BUILDVERSION=m,t.bindPlayers(d,"PLLOG")),d})):console&&console.warn&&console.warn("Warning: Your current browser environment does not sufficiently support ECMA5 standards. Nielsen SDK will not be initialized.")}catch(e){t("ERROR: "+e.message)}}(window);